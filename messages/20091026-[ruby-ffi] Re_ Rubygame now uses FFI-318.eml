Delivered-To: headius@headius.com
Received: by 10.224.73.145 with SMTP id q17cs70335qaj;
        Sun, 25 Oct 2009 23:10:34 -0700 (PDT)
Received: by 10.224.36.139 with SMTP id t11mr6986846qad.350.1256537434313;
        Sun, 25 Oct 2009 23:10:34 -0700 (PDT)
Return-Path: <grbounce-oS_-awUAAACicsVXPUFstTOYQmrUJNfw=headius=headius.com@googlegroups.com>
Received: from mail-vw0-f142.google.com (mail-vw0-f142.google.com [209.85.212.142])
        by mx.google.com with ESMTP id 15si15945202qyk.125.2009.10.25.23.10.33;
        Sun, 25 Oct 2009 23:10:33 -0700 (PDT)
Received-SPF: pass (google.com: domain of grbounce-oS_-awUAAACicsVXPUFstTOYQmrUJNfw=headius=headius.com@googlegroups.com designates 209.85.212.142 as permitted sender) client-ip=209.85.212.142;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of grbounce-oS_-awUAAACicsVXPUFstTOYQmrUJNfw=headius=headius.com@googlegroups.com designates 209.85.212.142 as permitted sender) smtp.mail=grbounce-oS_-awUAAACicsVXPUFstTOYQmrUJNfw=headius=headius.com@googlegroups.com; dkim=pass (test mode) header.i=@googlegroups.com
Received: by vws6 with SMTP id 6so11962753vws.13
        for <headius@headius.com>; Sun, 25 Oct 2009 23:10:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlegroups.com; s=beta;
        h=domainkey-signature:received:received:x-sender:x-apparently-to
         :received:received:received:received-spf:received:dkim-signature
         :domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding:reply-to:sender:precedence:x-google-loop
         :mailing-list:list-id:list-post:list-help:list-unsubscribe
         :x-beenthere-env:x-beenthere;
        bh=xqmDG5beeeTeW3//vk887J6QdZzjINZk5hGcG8XXxd0=;
        b=3a3T/YknV1kqde5m7uMIF6U1heKAl/sh/BsTvKj9f+P9Ql4kMWdQB1lnxVx5CwIL4Z
         VdaRiPBAxvwjQZsoCOeDnJPMomeoBg2DYGAXqPEooTImXVQbd5B+bUWw0zj0BmtDIdaH
         ZfBvdald2FY5HkeX0QL6xI0ny3Cdx1uHfSUcA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlegroups.com; s=beta;
        h=x-sender:x-apparently-to:received-spf:authentication-results
         :dkim-signature:domainkey-signature:mime-version:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding:reply-to:sender:precedence:x-google-loop
         :mailing-list:list-id:list-post:list-help:list-unsubscribe
         :x-beenthere-env:x-beenthere;
        b=CpsimxIXkLG85h5nm4Jsw+rAEbSz/8smtJ4wbXZh4CUKEpXhsR3L+snhxeIoLPSkpN
         MZBxLAH8d544pUonmAe8i/gkKnoAHB+kdcKSKIuKs+VuldfTwnvreWdjoENAysRRJ5pS
         egOKhNDS3AiqvZzyqFEMeZTczxl1FNRFbOlN8=
Received: by 10.220.66.75 with SMTP id m11mr3115vci.11.1256537431675;
        Sun, 25 Oct 2009 23:10:31 -0700 (PDT)
Received: by 10.176.133.2 with SMTP id g2gr68yqd.0;
	Sun, 25 Oct 2009 23:10:31 -0700 (PDT)
X-Sender: jacius@gmail.com
X-Apparently-To: ruby-ffi@googlegroups.com
Received: by 10.101.7.30 with SMTP id k30mr11385192ani.10.1256537431227; Sun, 25 Oct 2009 23:10:31 -0700 (PDT)
Received: by 10.101.7.30 with SMTP id k30mr11385190ani.10.1256537431209; Sun, 25 Oct 2009 23:10:31 -0700 (PDT)
Return-Path: <jacius@gmail.com>
Received: from mail-gx0-f221.google.com (mail-gx0-f221.google.com [209.85.217.221]) by gmr-mx.google.com with ESMTP id 17si837192gxk.4.2009.10.25.23.10.30; Sun, 25 Oct 2009 23:10:30 -0700 (PDT)
Received-SPF: pass (google.com: domain of jacius@gmail.com designates 209.85.217.221 as permitted sender) client-ip=209.85.217.221;
Received: by gxk21 with SMTP id 21so12886326gxk.10 for <ruby-ffi@googlegroups.com>; Sun, 25 Oct 2009 23:10:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=gamma; h=domainkey-signature:mime-version:received:in-reply-to:references :from:date:message-id:subject:to:content-type :content-transfer-encoding; bh=1/5LidhrvY8bQQhdYsM0rF4dfIZYq4o2gVbgcNT553E=; b=edZBAYr3axKfVsGMZw0YJPYvjDiQNnarzvNYMGStOQ011bS/36hXGyT7zsTnalPq0V WalSZibGVjzcjDT/4PikjGVXN/BE5kGr0jrQx4nspN4EN9qBcZ9EuDgX3LnpmyWIKRci eKMMsP84a5T5Q8mcfiNHo3prN+akorUCiINuc=
DomainKey-Signature: a=rsa-sha1; c=nofws; d=gmail.com; s=gamma; h=mime-version:in-reply-to:references:from:date:message-id:subject:to :content-type:content-transfer-encoding; b=QxoVn3qHsNfqSzgK5gqEcsg9NEn2mXZTV4J3PS6BhZMS2BfTWEzf3gr6sZTwovVPyp O6Fni84aMSEfBhQWCx6VzXHewPG4DmEiXD80hLHhDqPuCd5GZW59iwt9D2VCsxn5AWwV ZIyduL5FLsRmqX3FX/i8C0k2on6Q7IlUbSNG0=
MIME-Version: 1.0
Received: by 10.100.235.1 with SMTP id i1mr306076anh.40.1256537430112; Sun, 25  Oct 2009 23:10:30 -0700 (PDT)
In-Reply-To: <f04d2210910251919s2559da25m6e7fd68b3e149542@mail.gmail.com>
References: <bf2f536c0910251145x5792b613xdbd15bfce9ddee5c@mail.gmail.com>  <f04d2210910251919s2559da25m6e7fd68b3e149542@mail.gmail.com>
From: John Croisant <jacius@gmail.com>
Date: Mon, 26 Oct 2009 01:10:10 -0500
Message-ID: <bf2f536c0910252310y770b2c19n725108e39a89a5c1@mail.gmail.com>
Subject: [ruby-ffi] Re: Rubygame now uses FFI
To: ruby-ffi@googlegroups.com
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
Reply-To: ruby-ffi@googlegroups.com
Sender: ruby-ffi@googlegroups.com
Precedence: bulk
X-Google-Loop: groups
Mailing-List: list ruby-ffi@googlegroups.com;
	contact ruby-ffi+owner@googlegroups.com
List-Id: <ruby-ffi.googlegroups.com>
List-Post: <mailto:ruby-ffi@googlegroups.com>
List-Help: <mailto:ruby-ffi+help@googlegroups.com>
List-Unsubscribe: <http://googlegroups.com/group/ruby-ffi/subscribe>,
	<mailto:ruby-ffi+unsubscribe@googlegroups.com>
X-BeenThere-Env: ruby-ffi@googlegroups.com
X-BeenThere: ruby-ffi@googlegroups.com


On Sun, Oct 25, 2009 at 9:19 PM, Charles Oliver Nutter
<headius@headius.com> wrote:
>
> On Sun, Oct 25, 2009 at 1:45 PM, John Croisant <jacius@gmail.com> wrote:
>> Also, I'm afraid JRuby
>> users on Mac are out of luck until a JRuby equivalent of RSDL [2] is
>> written.
>>
>> =C2=A0[1] http://github.com/ffi/ffi-jruby
>> =C2=A0[2] http://github.com/knu/rsdl
>
> I'm not clear what RSDL is actually needed for. Can you explain? The
> readme and the minimal .c file was pretty limited in description.
>
> - Charlie

RSDL is essentially a wrapper around the Ruby interpreter, but it
performs some SDL initialization magic that is only necessary on Mac.
It has something to do with priming Cocoa to open a display window,
but the details are somewhat arcane, and the implementation is rather
messy. Without RSDL -- that is, using the plain Ruby (or JRuby)
interpreter -- Rubygame and Ruby/SDL applications just print a bunch
of gibberish to the console instead of opening a display window.

Due to the messy and obscure implementation hidden inside SDL, I'm not
sure there's any way around it except to create a Java program that
initializes SDL and then runs an embedded JRuby interpreter. It *may*
be possible to initiate some of the Cocoa stuff that SDL wants via FFI
or other means, but the mish-mash of C (SDL), Objective-C (Cocoa),
Java, and Ruby makes my head spin just thinking about it. A Java app
wrapper would probably be simpler -- although more inconvenient for
users, because it's one more thing to install, and it's annoying to
have to remember to use it instead of the usual Ruby interpreter.

I think (or at least hope) that this annoying issue will be solved in
SDL 1.3, but I have no clue when that will be released. It has been
"almost ready" several times over the past 2-3 years, but it has never
managed to get off the ground. I could possibly set up a binding to
the SDL 1.3 SVN version, but I'm generally not in the habit of using
unreleased software as dependencies.

My own feeling is that the best, simplest, cleanest course right now
is for Rubygame to provide an OpenGL back end, but I'm not sure how
soon I'll be able to attempt it. If someone with Java knowledge wants
to try making a JRuby-ish RSDL wrapper, I think that would also have a
good chance of letting Rubygame work on Mac JRuby in the meantime.

- John
