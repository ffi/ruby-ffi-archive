Delivered-To: headius@headius.com
Received: by 10.100.134.8 with SMTP id h8cs218678and;
        Tue, 15 Dec 2009 22:45:28 -0800 (PST)
Received: by 10.150.242.3 with SMTP id p3mr1142356ybh.22.1260945928308;
        Tue, 15 Dec 2009 22:45:28 -0800 (PST)
Return-Path: <3BoIoSwYJCPsfrvwdqjpdlo.frpuxe1-iiljrrjohjurxsv.frp@listserv.bounces.google.com>
Received: from mail-yx0-f142.google.com (mail-yx0-f142.google.com [209.85.210.142])
        by mx.google.com with ESMTP id 32si949671ywh.7.2009.12.15.22.45.27;
        Tue, 15 Dec 2009 22:45:27 -0800 (PST)
Received-SPF: pass (google.com: domain of 3BoIoSwYJCPsfrvwdqjpdlo.frpuxe1-iiljrrjohjurxsv.frp@listserv.bounces.google.com designates 209.85.210.142 as permitted sender) client-ip=209.85.210.142;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of 3BoIoSwYJCPsfrvwdqjpdlo.frpuxe1-iiljrrjohjurxsv.frp@listserv.bounces.google.com designates 209.85.210.142 as permitted sender) smtp.mail=3BoIoSwYJCPsfrvwdqjpdlo.frpuxe1-iiljrrjohjurxsv.frp@listserv.bounces.google.com; dkim=pass (test mode) header.i=@googlegroups.com
Received: by yxe6 with SMTP id 6sf1449165yxe.13
        for <headius@headius.com>; Tue, 15 Dec 2009 22:45:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlegroups.com; s=beta;
        h=domainkey-signature:received:x-beenthere:received:received:received
         :received:received:received-spf:received:mime-version:received:date
         :in-reply-to:x-ip:references:user-agent:x-http-useragent:message-id
         :subject:from:to:reply-to:precedence:mailing-list:list-id:list-post
         :list-help:list-archive:x-thread-url:x-message-url:sender
         :list-unsubscribe:list-subscribe:content-type
         :content-transfer-encoding;
        bh=OMCFt941lqLlOuCFGOX1SJ9Dgkw+PWVDdQCrFDOiMWg=;
        b=BdN58PzVfrrLx0uHo6/i5Z14Ea7HB160VGUAluKpwqEEg0DbkZFTbHMlJls2Zf22ow
         G/7YU/sgQ6M3ZErVqyyHzGRNdFiJ+k3Jn+OGllOv3qPD+k2f/tH9sf9eUZxmNhMzwtIj
         ilho5084v+pLT35UX+nTzJJmsqmAIyQbic4qs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlegroups.com; s=beta;
        h=x-beenthere:received-spf:mime-version:date:in-reply-to:x-ip
         :references:user-agent:x-http-useragent:message-id:subject:from:to
         :reply-to:precedence:mailing-list:list-id:list-post:list-help
         :list-archive:x-thread-url:x-message-url:sender:list-unsubscribe
         :list-subscribe:content-type:content-transfer-encoding;
        b=QJWfK2EjqRy3bNlfSlXS6kLLDIJg/jXGm2qkkPQ/F/dyoPm5982i1Yw3Q5YO+xP0bv
         XPXjJ2mMhFB0dbr8v/sqPY9EfNJPaT5aimYA2DWwU773iI1lYaQS12Is1h4+9smqdvNt
         mTSJy4KPJ/Gp9J0rbOyHUypH9fDo39zbFDs7c=
Received: by 10.150.162.6 with SMTP id k6mr42593ybe.74.1260945926277;
        Tue, 15 Dec 2009 22:45:26 -0800 (PST)
X-BeenThere: ruby-ffi@googlegroups.com
Received: by 10.150.77.36 with SMTP id z36ls294742yba.3.p; Tue, 15 Dec 2009 
	22:45:25 -0800 (PST)
Received: by 10.150.3.30 with SMTP id 30mr760789ybc.0.1260945925565;
        Tue, 15 Dec 2009 22:45:25 -0800 (PST)
Received: by 10.91.82.2 with SMTP id j2mr875628agl.2.1260944466492;
        Tue, 15 Dec 2009 22:21:06 -0800 (PST)
Received: by 10.91.82.2 with SMTP id j2mr875626agl.2.1260944466456;
        Tue, 15 Dec 2009 22:21:06 -0800 (PST)
Return-Path: <costan@gmail.com>
Received: from mail-yw0-f155.google.com (mail-yw0-f155.google.com [209.85.211.155])
        by gmr-mx.google.com with ESMTP id 11si80292gxk.9.2009.12.15.22.21.06;
        Tue, 15 Dec 2009 22:21:06 -0800 (PST)
Received-SPF: pass (google.com: domain of costan@gmail.com designates 209.85.211.155 as permitted sender) client-ip=209.85.211.155;
Received: by mail-yw0-f155.google.com with SMTP id 27so1453168ywh.2
        for <ruby-ffi@googlegroups.com>; Tue, 15 Dec 2009 22:21:06 -0800 (PST)
MIME-Version: 1.0
Received: by 10.150.255.5 with SMTP id c5mr42666ybi.81.1260944466415; Tue, 15 
	Dec 2009 22:21:06 -0800 (PST)
Date: Tue, 15 Dec 2009 22:21:06 -0800 (PST)
In-Reply-To: <E1011BFF-3DCA-4782-B3D9-2E795ECB0914@gmail.com>
X-IP: 18.95.5.45
References: <E1011BFF-3DCA-4782-B3D9-2E795ECB0914@gmail.com>
User-Agent: G2/1.0
X-HTTP-UserAgent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.5) 
	Gecko/20091109 Ubuntu/9.10 (karmic) Firefox/3.5.5,gzip(gfe),gzip(gfe)
Message-ID: <7121ea06-d828-4eff-97d8-111fabb604fb@e7g2000vbi.googlegroups.com>
Subject: [ruby-ffi] Re: Towards a 1.0 API for Ruby FFI
From: Victor Costan <costan@gmail.com>
To: ruby-ffi <ruby-ffi@googlegroups.com>
Reply-To: ruby-ffi@googlegroups.com
Precedence: list
Mailing-list: list ruby-ffi@googlegroups.com; contact ruby-ffi+owners@googlegroups.com
List-ID: <ruby-ffi.googlegroups.com>
List-Post: <http://groups.google.com/group/ruby-ffi/post?hl=>, 
	<mailto:ruby-ffi@googlegroups.com>
List-Help: <http://groups.google.com/support/?hl=>, <mailto:ruby-ffi+help@googlegroups.com>
List-Archive: <http://groups.google.com/group/ruby-ffi?hl=>
X-Thread-Url: http://groups.google.com/group/ruby-ffi/t/ccf77d629a0be537
X-Message-Url: http://groups.google.com/group/ruby-ffi/msg/98c313a556d87f1a
Sender: ruby-ffi@googlegroups.com
List-Unsubscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=>, 
	<mailto:ruby-ffi+unsubscribe@googlegroups.com>
List-Subscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=>, 
	<mailto:ruby-ffi+subscribe@googlegroups.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Is it feasible to make "FFI.add_sys_types" available on all platforms
if it's implemented at runtime?

I'm thinking ideally the ffi gem will come prebuilt, at least for OSX
and Windows, so users might not have Xcode / mingw / Vistual Studio.
To me, the biggest advantage of using ffi is not having to deal with
all the extension building stuff on a per-gem basis.

    Victor


On Dec 14, 8:04=A0pm, Ernest Prabhakar <ernest.prabha...@gmail.com>
wrote:
> Hi Evan,
>
> On Dec 14, 2009, at 3:28 PM, Evan Phoenix wrote:
>
> > My original API was slim and light, but had a number of holes. Those ho=
les have been filled by the different implementations in different ways and=
 thusly only the simplest of APIs are now common.
>
> > I think that it is in the best interest of FFI, if it is truly to be a =
cross implementation API, that all new API additions stop and we begin to f=
ormalize a 1.0 API.
>
> > This would allow us a clean, consistent target for all implementations.=
 In addition, it would simplify what to spec.
>
> Sounds good to me. =A0I'm starting a new thread, as Google Groups gets gn=
arly about such things, and I want to be able to track this. =A0I'll put th=
e spec effort on hold until we hash this out.
>
>
>
> > I don't want to turn this into design by committee, but if people do wa=
nt the API to be cross implementation, some degree of coordination and agre=
ement must be reached. Unilateral changes only destabilize the effort.
>
> > Since it appears that most of the FFI implementers are on this list, pl=
ease reply to this email and indicate that you'd like to participate in the=
 planning of the 1.0 API.
>
> > To kick off the 1.0 planning, here is the list of builtin types that I =
believe the 1.0 should contain:
>
> > Fundamental Types:
>
> > =A0Platform Independent: int8, uint8, int16, uint16, int32, uint32, int=
64, uint64, float32, float64, pointer, string, buffer
>
> > =A0Platform Dependent: char, uchar, int, uint, long, ulong, float, doub=
le
>
> > Composite Types:
>
> > =A0struct, callback
>
> > Users would have the ability to add their own aliases for structs, etc.
>
> > In addition, I believe the unix types provided by sys/types should be m=
ade available by requesting so. Perhaps calling "FFI.add_sys_types" would b=
e fine (this as opposed to a require so that it can be calculated entirely =
at runtime if need be)
>
> > Thats a good place for us to start. Please comment.
>
> Nice. I'll try to capture the discussion on the wiki:
>
> http://wiki.github.com/ffi/ffi/proposal-for-standard-10-api
>
> -- Ernie P.
