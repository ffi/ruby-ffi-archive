<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>[ruby-ffi] Re: How to specify size for returned buffer?</title>
<link rel="important stylesheet" href="">
<style>div.headerdisplayname {font-weight:bold;}</style></head>
<body>
<table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part1"><tr><td><div class="headerdisplayname" style="display:inline;">Subject: </div>[ruby-ffi] Re: How to specify size for returned buffer?</td></tr><tr><td><div class="headerdisplayname" style="display:inline;">From: </div>cfis <cfis@savagexi.com></td></tr><tr><td><div class="headerdisplayname" style="display:inline;">Date: </div>8/20/11 6:17 PM</td></tr></table><table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part2"><tr><td><div class="headerdisplayname" style="display:inline;">To: </div>ruby-ffi <ruby-ffi@googlegroups.com></td></tr></table><br>
<div class="moz-text-plain" wrap=true graphical-quote=true style="font-family: -moz-fixed; font-size: 12px;" lang="x-western"><pre wrap>

On Aug 20, 1:59Â am, przemo_li <a class="moz-txt-link-rfc2396E" href="mailto:an.prze...@gmail.com">&lt;an.prze...@gmail.com&gt;</a> wrote:
</pre><blockquote type=cite style="color: #000000;"><pre wrap>
<span class="moz-txt-citetags">&gt; </span>Why do you need "buffer" having ".size". Cant you pack both variables
<span class="moz-txt-citetags">&gt; </span>into class instance that do "anything" you want buffer to do?
</pre></blockquote><pre wrap>

Reading the ruby-ffi Pointer class source code, on any access to the
underlying memory it has a bound check which needs to know the size to
work correctly.  If the pointer thinks the size is zero, you can't get
the underlying data.  And since this is image data, there isn't a null
character to signify its end.

So I need to tell the pointer how long its buffer is - and I'm not
sure how to do that.

Thanks,

Charlie
</pre></div></body>
</html>
</table></div>