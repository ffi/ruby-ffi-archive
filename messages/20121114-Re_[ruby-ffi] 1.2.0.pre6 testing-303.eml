X-Mozilla-Keys: notjunk $notjunk
Delivered-To: headius@headius.com
Received: by 10.112.81.161 with SMTP id b1csp538882lby;
        Wed, 14 Nov 2012 14:37:16 -0800 (PST)
Received: by 10.224.178.16 with SMTP id bk16mr27014510qab.59.1352932635945;
        Wed, 14 Nov 2012 14:37:15 -0800 (PST)
Return-Path: <ruby-ffi+bncBC3ZHK4B2AFBBGV2SCCQKGQEIY5UPSY@googlegroups.com>
Received: from mail-qa0-f55.google.com (mail-qa0-f55.google.com [209.85.216.55])
        by mx.google.com with ESMTPS id w19si3437751qct.118.2012.11.14.14.37.15
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 14 Nov 2012 14:37:15 -0800 (PST)
Received-SPF: pass (google.com: domain of ruby-ffi+bncBC3ZHK4B2AFBBGV2SCCQKGQEIY5UPSY@googlegroups.com designates 209.85.216.176 as permitted sender) client-ip=209.85.216.176;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of ruby-ffi+bncBC3ZHK4B2AFBBGV2SCCQKGQEIY5UPSY@googlegroups.com designates 209.85.216.176 as permitted sender) smtp.mail=ruby-ffi+bncBC3ZHK4B2AFBBGV2SCCQKGQEIY5UPSY@googlegroups.com; dkim=pass header.i=@googlegroups.com
Received: by mail-qa0-f55.google.com with SMTP id t11sf892105qaa.10
        for <headius@headius.com>; Wed, 14 Nov 2012 14:37:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlegroups.com; s=20120806;
        h=x-beenthere:received-spf:date:from:to:subject:message-id
         :in-reply-to:references:x-mailer:mime-version:x-original-sender
         :x-original-authentication-results:reply-to:precedence:mailing-list
         :list-id:x-google-group-id:list-post:list-help:list-archive:sender
         :list-subscribe:list-unsubscribe:content-type
         :content-transfer-encoding;
        bh=kOd8ba7JatRRIcY7yUPJhtrFM9NcniReB5KuyvjX+H4=;
        b=t2mIKnBXyDc+Hc5NF1XtgBN68v12HtahJdQ8qZAMLdw66I+a1ehXM0WQEI6U8yJhWS
         dYU220R5k3U978Hrmkt2cbH9P8hz1kaFZ0D7jGD91w2MCLEnBfzaO149M5qsc2xN2IT9
         GpnY4MQH0o7Sr2ZLTUe77N6aaQIGMmKWDZITVjNjw4UrvCWduLuUr83YXqkFhs39Uo78
         VCUnLZY/9PApQACjLvFJOznxJ4DpZWZxZglN07ZPehypWozgYvum2shBGbd5T9Y7gRp1
         IFKMeR8q+31mKWYf1kHQJfGxq7Tw6NHuf3KPO3mpqVVW6Ds4tQ9LzAlRlTLRNNsAgPOP
         qzaA==
Received: by 10.49.63.69 with SMTP id e5mr17264qes.40.1352932635381;
        Wed, 14 Nov 2012 14:37:15 -0800 (PST)
X-BeenThere: ruby-ffi@googlegroups.com
Received: by 10.49.35.38 with SMTP id e6ls19651qej.49.gmail; Wed, 14 Nov 2012
 14:37:14 -0800 (PST)
Received: by 10.224.180.141 with SMTP id bu13mr10881119qab.2.1352932634106;
        Wed, 14 Nov 2012 14:37:14 -0800 (PST)
Received: by 10.224.180.141 with SMTP id bu13mr10881117qab.2.1352932634093;
        Wed, 14 Nov 2012 14:37:14 -0800 (PST)
Received: from mail-qc0-f176.google.com (mail-qc0-f176.google.com [209.85.216.176])
        by gmr-mx.google.com with ESMTPS id fg3si1565055qcb.2.2012.11.14.14.37.14
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 14 Nov 2012 14:37:14 -0800 (PST)
Received-SPF: pass (google.com: domain of jon.forums@gmail.com designates 209.85.216.176 as permitted sender) client-ip=209.85.216.176;
Received: by mail-qc0-f176.google.com with SMTP id n41so572512qco.7
        for <ruby-ffi@googlegroups.com>; Wed, 14 Nov 2012 14:37:14 -0800 (PST)
Received: by 10.229.78.144 with SMTP id l16mr2347609qck.12.1352932633933;
        Wed, 14 Nov 2012 14:37:13 -0800 (PST)
Received: from Red (cpe-65-185-110-237.woh.res.rr.com. [65.185.110.237])
        by mx.google.com with ESMTPS id em3sm3463592qab.12.2012.11.14.14.37.12
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 14 Nov 2012 14:37:13 -0800 (PST)
Date: Wed, 14 Nov 2012 17:37:15 -0500
From: Jon <jon.forums@gmail.com>
To: ruby-ffi@googlegroups.com
Subject: Re: [ruby-ffi] 1.2.0.pre6 testing
Message-Id: <20121114173715.26b0f2fc4ebc3c3087adf18e@gmail.com>
In-Reply-To: <39b46a99-c1b4-477e-92ea-fc1a1417552a@googlegroups.com>
References: <ded4dedd-a8fc-42da-a5d1-7ce046e56d00@googlegroups.com>
	<20121113231711.59b543ca9e6a6510786ca3de@gmail.com>
	<39b46a99-c1b4-477e-92ea-fc1a1417552a@googlegroups.com>
X-Mailer: Sylpheed 3.3.0 (GTK+ 2.10.14; i686-pc-mingw32)
Mime-Version: 1.0
X-Original-Sender: jon.forums@gmail.com
X-Original-Authentication-Results: gmr-mx.google.com; spf=pass (google.com:
 domain of jon.forums@gmail.com designates 209.85.216.176 as permitted sender)
 smtp.mail=jon.forums@gmail.com; dkim=pass header.i=@gmail.com
Reply-To: ruby-ffi@googlegroups.com
Precedence: list
Mailing-list: list ruby-ffi@googlegroups.com; contact ruby-ffi+owners@googlegroups.com
List-ID: <ruby-ffi.googlegroups.com>
X-Google-Group-Id: 238405446264
List-Post: <http://groups.google.com/group/ruby-ffi/post?hl=en_US>, <mailto:ruby-ffi@googlegroups.com>
List-Help: <http://groups.google.com/support/?hl=en_US>, <mailto:ruby-ffi+help@googlegroups.com>
List-Archive: <http://groups.google.com/group/ruby-ffi?hl=en_US>
Sender: ruby-ffi@googlegroups.com
List-Subscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=en_US>, <mailto:ruby-ffi+subscribe@googlegroups.com>
List-Unsubscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=en_US>,
 <mailto:googlegroups-manage+238405446264+unsubscribe@googlegroups.com>
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

> > While I never install ffi this way, jruby+bundler on Win7 32bit with JRuby 
> > 1.7.0 ended up in Wile E. flames trying to build the C ext due to my 
> > scheming: 
> >
> > C:\Users\Jon\Downloads\temp\ffi-java>type Gemfile 
> > source :rubygems 
> > gem 'ffi', '1.2.0.pre6', :platforms => :jruby 
> >
> > C:\Users\Jon\Downloads\temp\ffi-java>bundle install 
> > Fetching gem metadata from http://rubygems.org/........... 
> > Fetching gem metadata from http://rubygems.org/.. 
> > Installing ffi (1.2.0.pre6) with native extensions 
> > Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native 
> > extension. 
> 
>  
> Hmm.  When installing on something that is not MRI, extconf.rb generates a 
> dummy Makefile.  I suspect on win32, the dummy Makefile isn't quite 
> correct.  Can you investigate this one a bit more (look right at the bottom 
> of ext/ext_c/extconf.rb)?  It could be something as simple as \r\n vs \n 
> line termination.
> 
> I can continue to publish the ffi-java gem, but, I want to get rid of it in 
> the long term.

Likely just need this tweak at extconf.rb:59

-  File.open("Makefile", "w") do |mf|
+  File.open("Makefile", "wb") do |mf|

I'll try it out a bit later.
