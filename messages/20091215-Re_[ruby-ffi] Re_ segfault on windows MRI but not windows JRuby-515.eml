Delivered-To: headius@headius.com
Received: by 10.100.134.8 with SMTP id h8cs180590and;
        Tue, 15 Dec 2009 08:19:31 -0800 (PST)
Received: by 10.224.72.3 with SMTP id k3mr4046499qaj.333.1260893970547;
        Tue, 15 Dec 2009 08:19:30 -0800 (PST)
Return-Path: <3EbcnSwoJCDsglk.clorjpdjXfi.ZljorYv-ccfdlldibdolrmp.Zlj@listserv.bounces.google.com>
Received: from mail-qy0-f168.google.com (mail-qy0-f168.google.com [209.85.221.168])
        by mx.google.com with ESMTP id 4si10840208qyk.8.2009.12.15.08.19.30;
        Tue, 15 Dec 2009 08:19:30 -0800 (PST)
Received-SPF: pass (google.com: domain of 3EbcnSwoJCDsglk.clorjpdjXfi.ZljorYv-ccfdlldibdolrmp.Zlj@listserv.bounces.google.com designates 209.85.221.168 as permitted sender) client-ip=209.85.221.168;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of 3EbcnSwoJCDsglk.clorjpdjXfi.ZljorYv-ccfdlldibdolrmp.Zlj@listserv.bounces.google.com designates 209.85.221.168 as permitted sender) smtp.mail=3EbcnSwoJCDsglk.clorjpdjXfi.ZljorYv-ccfdlldibdolrmp.Zlj@listserv.bounces.google.com
Received: by qyk40 with SMTP id 40sf17445qyk.22
        for <headius@headius.com>; Tue, 15 Dec 2009 08:19:30 -0800 (PST)
Received: by 10.229.114.218 with SMTP id f26mr59616qcq.17.1260893969451;
        Tue, 15 Dec 2009 08:19:29 -0800 (PST)
X-BeenThere: ruby-ffi@googlegroups.com
Received: by 10.229.26.146 with SMTP id e18ls2604930qcc.1.p; Tue, 15 Dec 2009 
	08:19:28 -0800 (PST)
Received: by 10.229.93.35 with SMTP id t35mr937031qcm.11.1260893968501;
        Tue, 15 Dec 2009 08:19:28 -0800 (PST)
Received: by 10.229.93.35 with SMTP id t35mr937030qcm.11.1260893968479;
        Tue, 15 Dec 2009 08:19:28 -0800 (PST)
Return-Path: <jon.forums@gmail.com>
Received: from mail-qy0-f192.google.com (mail-qy0-f192.google.com [209.85.221.192])
        by gmr-mx.google.com with ESMTP id 19si1347013qyk.4.2009.12.15.08.19.27;
        Tue, 15 Dec 2009 08:19:27 -0800 (PST)
Received-SPF: pass (google.com: domain of jon.forums@gmail.com designates 209.85.221.192 as permitted sender) client-ip=209.85.221.192;
Received: by qyk30 with SMTP id 30so8323qyk.33
        for <ruby-ffi@googlegroups.com>; Tue, 15 Dec 2009 08:19:27 -0800 (PST)
Received: by 10.224.114.9 with SMTP id c9mr4071842qaq.281.1260893967269;
        Tue, 15 Dec 2009 08:19:27 -0800 (PST)
Return-Path: <jon.forums@gmail.com>
Received: from Red (rrcs-24-172-153-250.central.biz.rr.com [24.172.153.250])
        by mx.google.com with ESMTPS id 22sm4355124iwn.0.2009.12.15.08.19.25
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 15 Dec 2009 08:19:26 -0800 (PST)
Date: Tue, 15 Dec 2009 11:19:14 -0500
From: Jon <jon.forums@gmail.com>
To: ruby-ffi@googlegroups.com
Subject: Re: [ruby-ffi] Re: segfault on windows MRI but not windows JRuby
Message-Id: <20091215111914.75bc112a.jon.forums@gmail.com>
In-Reply-To: <8dd3dbc5-343f-4563-b19d-802ddc72652b@x5g2000prf.googlegroups.com>
References: <20091127124131.0f3ca7b2.jon.forums@gmail.com>
	<d96ec452-bbd1-4741-bb53-2bdfdb1be5b8@z3g2000prd.googlegroups.com>
	<20091214113356.a4e30c0f.jon.forums@gmail.com>
	<8dd3dbc5-343f-4563-b19d-802ddc72652b@x5g2000prf.googlegroups.com>
X-Mailer: Sylpheed 2.7.1 (GTK+ 2.10.14; i686-pc-mingw32)
Mime-Version: 1.0
X-Original-Authentication-Results: gmr-mx.google.com; spf=pass (google.com: 
	domain of jon.forums@gmail.com designates 209.85.221.192 as permitted sender) 
	smtp.mail=jon.forums@gmail.com; dkim=pass (test mode) header.i=@gmail.com
X-Original-Sender: jon.forums@gmail.com
Reply-To: ruby-ffi@googlegroups.com
Precedence: list
Mailing-list: list ruby-ffi@googlegroups.com; contact ruby-ffi+owners@googlegroups.com
List-ID: <ruby-ffi.googlegroups.com>
List-Post: <http://groups.google.com/group/ruby-ffi/post?hl=>, 
	<mailto:ruby-ffi@googlegroups.com>
List-Help: <http://groups.google.com/support/?hl=>, <mailto:ruby-ffi+help@googlegroups.com>
List-Archive: <http://groups.google.com/group/ruby-ffi?hl=>
X-Thread-Url: http://groups.google.com/group/ruby-ffi/t/1712f5507b15b467
X-Message-Url: http://groups.google.com/group/ruby-ffi/msg/168bf9e5fa894754
Sender: ruby-ffi@googlegroups.com
List-Unsubscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=>, 
	<mailto:ruby-ffi+unsubscribe@googlegroups.com>
List-Subscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=>, 
	<mailto:ruby-ffi+subscribe@googlegroups.com>
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

> How about this?
> http://gist.github.com/256660

The gist works on my "ruby 1.9.1p243 (2009-07-16 revision 24175) [i386-mingw32]" without a segfault :)

...and I now see your point about the outdated "callback" in library.rb in 0.5.4 that's now been updated in master.  Thank you.


FYI, the same gist on my JRuby 1.4.0 (1.8 and 1.9 modes) gives the following

C:\Users\Jon\Documents\RubyDev\sandbox>jruby ffi_enumwin_fix.rb
ffi_enumwin_fix.rb:15:in `callback': wrong # of arguments(3 for 2) (ArgumentError)
        from ffi_enumwin_fix.rb:35

...which looking over JRuby's lib/ruby/site_ruby/shared/ffi/library.rb shows the same outdated "callback" which I just noticed as of this morning hasn't yet been committed to http://github.com/jruby/jruby/blob/master/lib/ruby/site_ruby/shared/ffi/library.rb
