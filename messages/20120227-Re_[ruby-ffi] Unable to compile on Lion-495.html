<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Re: [ruby-ffi] Unable to compile on Lion</title>
<link rel="important stylesheet" href="">
<style>div.headerdisplayname {font-weight:bold;}</style></head>
<body>
<table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part1"><tr><td><div class="headerdisplayname" style="display:inline;">Subject: </div>Re: [ruby-ffi] Unable to compile on Lion</td></tr><tr><td><div class="headerdisplayname" style="display:inline;">From: </div>Wayne Meissner <wmeissner@gmail.com></td></tr><tr><td><div class="headerdisplayname" style="display:inline;">Date: </div>2/27/12 7:19 PM</td></tr></table><table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part2"><tr><td><div class="headerdisplayname" style="display:inline;">To: </div>ruby-ffi@googlegroups.com</td></tr></table><br>
<div class="moz-text-html"  lang="x-unicode"><div><br></div>That looks very odd. &nbsp;Basically, the shell variable is getting mangled somewhere ($$arch becomes rch when it is expanded). &nbsp;I can't reproduce it on Lion, using the system ruby, or various custom ruby installs. &nbsp;Do you have a custom shell installed? &nbsp;(i.e. not bash)<div><br></div><div>Try the latest source - I've changed the universal build so it should be simpler.<br><br>On Saturday, 25 February 2012 22:59:51 UTC+10, Adrian  wrote:<blockquote class="gmail_quote" style="margin: 0;margin-left: 0.8ex;border-left: 1px #ccc solid;padding-left: 1ex;">There still appears to be an issue install libffi in lion...<p>" &nbsp; If a cross compiler is detected then cross compile mode will be used."</p><p>Adrian</p><p></p><p><br>07:56:13 $&gt; sudo gem install ffi <br>Building native extensions. &nbsp;This could take a while...<br>ERROR: &nbsp;Error installing ffi:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ERROR: Failed to build gem native extension.</p><p>&nbsp; &nbsp; &nbsp; &nbsp; /System/Library/Frameworks/<wbr>Ruby.framework/Versions/1.8/<wbr>usr/bin/ruby extconf.rb<br>checking for ffi.h... no<br>checking for ffi.h in /usr/local/include... no<br>checking for rb_thread_blocking_region()... no<br>checking for ruby_thread_has_gvl_p()... no<br>checking for ruby_native_thread_p()... no<br>checking for rb_thread_call_with_gvl()... no<br>creating extconf.h<br>creating Makefile</p><p>make<br>Configuring libffi for rch<br>configure: WARNING: If you wanted to set the --build type, don't use --host.<br>&nbsp; &nbsp; If a cross compiler is detected then cross compile mode will be used.<br>Invalid configuration `rch-apple-darwin': machine `rch-apple' not recognized<br>configure: error: /bin/sh /Library/Ruby/Gems/1.8/gems/<wbr>ffi-1.0.11/ext/ffi_c/libffi/<wbr>config.sub rch-apple-darwin failed<br>make[1]: *** No targets specified and no makefile found. &nbsp;Stop.<br>Configuring libffi for rch<br>configure: WARNING: If you wanted to set the --build type, don't use --host.<br>&nbsp; &nbsp; If a cross compiler is detected then cross compile mode will be used.<br>Invalid configuration `rch-apple-darwin': machine `rch-apple' not recognized<br>configure: error: /bin/sh /Library/Ruby/Gems/1.8/gems/<wbr>ffi-1.0.11/ext/ffi_c/libffi/<wbr>config.sub rch-apple-darwin failed<br>make[1]: *** No targets specified and no makefile found. &nbsp;Stop.<br>make: *** ["/Library/Ruby/Gems/1.8/gems/<wbr>ffi-1.0.11/ext/ffi_c/libffi"/.<wbr>libs/libffi_convenience.a] Error 2</p><p><br>Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/<wbr>ffi-1.0.11 for inspection.<br>Results logged to /Library/Ruby/Gems/1.8/gems/<wbr>ffi-1.0.11/ext/ffi_c/gem_make.<wbr>out<br>07:56:20 adrian@DeathStar-2 /source/phoenix $&gt; </p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p></blockquote></div>
</div></body>
</html>
</table></div>