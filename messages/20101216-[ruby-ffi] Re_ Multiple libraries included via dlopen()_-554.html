<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>[ruby-ffi] Re: Multiple libraries included via dlopen()?</title>
<link rel="important stylesheet" href="">
<style>div.headerdisplayname {font-weight:bold;}</style></head>
<body>
<table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part1"><tr><td><div class="headerdisplayname" style="display:inline;">Subject: </div>[ruby-ffi] Re: Multiple libraries included via dlopen()?</td></tr><tr><td><div class="headerdisplayname" style="display:inline;">From: </div>mjmac <mjmac42@gmail.com></td></tr><tr><td><div class="headerdisplayname" style="display:inline;">Date: </div>12/16/10 5:07 PM</td></tr></table><table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part2"><tr><td><div class="headerdisplayname" style="display:inline;">To: </div>ruby-ffi <ruby-ffi@googlegroups.com></td></tr></table><br>
<div class="moz-text-plain" wrap=true graphical-quote=true style="font-family: -moz-fixed; font-size: 12px;" lang="x-western"><pre wrap>
More details, perhaps useful...  I'm in over my head, but trying to
understand the various moving parts.  Thought I'd give LD_DEBUG a try.

I decided to use attach_function on the "missing" function to see if
that might force it to be available to the plugin.  No dice:

LD_DEBUG=all ./test.rb 2&gt;&amp;1 | grep slurm_auth_get_arg_desc
     20022:	symbol=slurm_auth_get_arg_desc;  lookup in file=/usr/lib64/
libslurm.so [0]
     20022:	binding file /usr/lib64/libslurm.so [0] to /usr/lib64/
libslurm.so [0]: normal symbol `slurm_auth_get_arg_desc'
...
     20030:     opening file=/usr/lib64/slurm/auth_munge.so [0];
direct_opencount=1
...
     20022:	/usr/lib64/slurm/auth_munge.so: error: symbol lookup
error: undefined symbol: slurm_auth_get_arg_desc (fatal)
ruby: symbol lookup error: /usr/lib64/slurm/auth_munge.so: undefined
symbol: slurm_auth_get_arg_desc

So, it looks like the attach_function finds the symbol in libslurm.so
OK, but this doesn't help with loading auth_munge.so.  Is this a
namespace problem of some sort?  I'm shaky on the details of what's
going on at this level, so I could be on the wrong track.

TIA for any advice.
</pre></div></body>
</html>
</table></div>