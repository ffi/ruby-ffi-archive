Delivered-To: headius@headius.com
Received: by 10.182.92.135 with SMTP id cm7csp78480obb;
        Mon, 27 Feb 2012 17:19:20 -0800 (PST)
Received: by 10.236.174.106 with SMTP id w70mr18748396yhl.68.1330391959687;
        Mon, 27 Feb 2012 17:19:19 -0800 (PST)
Return-Path: <ruby-ffi+bncCPS3mqGKCBCT17D6BBoE31AdMg@googlegroups.com>
Received: from mail-yw0-f62.google.com (mail-yw0-f62.google.com [209.85.213.62])
        by mx.google.com with ESMTPS id l67si17740260yhm.129.2012.02.27.17.19.19
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 27 Feb 2012 17:19:19 -0800 (PST)
Received-SPF: pass (google.com: domain of ruby-ffi+bncCPS3mqGKCBCT17D6BBoE31AdMg@googlegroups.com designates 209.85.213.62 as permitted sender) client-ip=209.85.213.62;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of ruby-ffi+bncCPS3mqGKCBCT17D6BBoE31AdMg@googlegroups.com designates 209.85.213.62 as permitted sender) smtp.mail=ruby-ffi+bncCPS3mqGKCBCT17D6BBoE31AdMg@googlegroups.com; dkim=pass header.i=@googlegroups.com
Received: by yhkk61 with SMTP id k61sf3372293yhk.7
        for <headius@headius.com>; Mon, 27 Feb 2012 17:19:19 -0800 (PST)
Return-Path: <ruby-ffi+bncCPS3mqGKCBCT17D6BBoE31AdMg@googlegroups.com>
Received-SPF: pass (google.com: domain of ruby-ffi+bncCPS3mqGKCBCT17D6BBoE31AdMg@googlegroups.com designates 10.68.220.227 as permitted sender) client-ip=10.68.220.227;
Received: from mr.google.com ([10.68.220.227])
        by 10.68.220.227 with SMTP id pz3mr5881946pbc.12.1330391959409 (num_hops = 1);
        Mon, 27 Feb 2012 17:19:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlegroups.com; s=beta;
        h=x-beenthere:date:from:to:message-id:in-reply-to:references:subject
         :mime-version:x-original-sender:x-original-authentication-results
         :reply-to:precedence:mailing-list:list-id:x-google-group-id
         :list-post:list-help:list-archive:sender:list-subscribe
         :list-unsubscribe:content-type;
        bh=DEtEXFqtCOSM8yW7BnfDFZk54m5IQ8BG+cqK+E6Q2NI=;
        b=P95kYQHErjFV2eGYyjrWRbMa2MvTm8S6oX2iM8YMeU9eaWA/fwCJDLD7uG1QGv7SP3
         IjdHvbkCDKg2V6dS5Vl6qTD+rWTdTKeUCUrhls6k+JO69g10/sFcgZUPS5PltcNTzhek
         5BmG7Fr67IS9rUE5kFSZnAmzBZz5JafaVK6WU=
Received: by 10.68.220.227 with SMTP id pz3mr1722584pbc.12.1330391955166;
        Mon, 27 Feb 2012 17:19:15 -0800 (PST)
X-BeenThere: ruby-ffi@googlegroups.com
Received: by 10.68.219.2 with SMTP id pk2ls19683802pbc.5.gmail; Mon, 27 Feb
 2012 17:19:14 -0800 (PST)
Received: by 10.68.229.65 with SMTP id so1mr2966924pbc.15.1330391954916;
        Mon, 27 Feb 2012 17:19:14 -0800 (PST)
Date: Mon, 27 Feb 2012 17:19:14 -0800 (PST)
From: Wayne Meissner <wmeissner@gmail.com>
To: ruby-ffi@googlegroups.com
Message-ID: <28171790.4144.1330391954469.JavaMail.geo-discussion-forums@pbgq3>
In-Reply-To: <E6BFB7A2-F795-4513-AF6D-4D5B0B5E563B@gmail.com>
References: <9fa64505-6ee9-458e-8a1f-e79f4d520ec0@s5g2000vbe.googlegroups.com> <41AB7CDA-2A77-4EBC-A2AC-219D82F5B768@gmail.com> <9B1DFB2D-27DA-47A8-A95F-6948AF37234B@gmail.com> <953220C8-4E1B-4890-B3B9-53B769F6DCA7@gmail.com> <30372AB5-F6A6-4865-ACC9-9C95C994220F@gmail.com>
 <E6BFB7A2-F795-4513-AF6D-4D5B0B5E563B@gmail.com>
Subject: Re: [ruby-ffi] Unable to compile on Lion
MIME-Version: 1.0
X-Original-Sender: wmeissner@gmail.com
X-Original-Authentication-Results: ls.google.com; spf=pass (google.com: domain of
 wmeissner@gmail.com designates internal as permitted sender)
 smtp.mail=wmeissner@gmail.com; dkim=pass
 header.i=@gmail.com
Reply-To: ruby-ffi@googlegroups.com
Precedence: list
Mailing-list: list ruby-ffi@googlegroups.com; contact ruby-ffi+owners@googlegroups.com
List-ID: <ruby-ffi.googlegroups.com>
X-Google-Group-Id: 238405446264
List-Post: <http://groups.google.com/group/ruby-ffi/post?hl=en_US>, <mailto:ruby-ffi@googlegroups.com>
List-Help: <http://groups.google.com/support/?hl=en_US>, <mailto:ruby-ffi+help@googlegroups.com>
List-Archive: <http://groups.google.com/group/ruby-ffi?hl=en_US>
Sender: ruby-ffi@googlegroups.com
List-Subscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=en_US>, <mailto:ruby-ffi+subscribe@googlegroups.com>
List-Unsubscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=en_US>,
 <mailto:googlegroups-manage+238405446264+unsubscribe@googlegroups.com>
Content-Type: multipart/alternative; 
	boundary="----=_Part_4143_20962465.1330391954468"

------=_Part_4143_20962465.1330391954468
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit


That looks very odd.  Basically, the shell variable is getting mangled 
somewhere ($$arch becomes rch when it is expanded).  I can't reproduce it 
on Lion, using the system ruby, or various custom ruby installs.  Do you 
have a custom shell installed?  (i.e. not bash)

Try the latest source - I've changed the universal build so it should be 
simpler.

On Saturday, 25 February 2012 22:59:51 UTC+10, Adrian wrote:
>
> There still appears to be an issue install libffi in lion...
>
> "   If a cross compiler is detected then cross compile mode will be used."
>
> Adrian
>
>
> 07:56:13 $> sudo gem install ffi 
> Building native extensions.  This could take a while...
> ERROR:  Error installing ffi:
>         ERROR: Failed to build gem native extension.
>
>         
> /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby 
> extconf.rb
> checking for ffi.h... no
> checking for ffi.h in /usr/local/include... no
> checking for rb_thread_blocking_region()... no
> checking for ruby_thread_has_gvl_p()... no
> checking for ruby_native_thread_p()... no
> checking for rb_thread_call_with_gvl()... no
> creating extconf.h
> creating Makefile
>
> make
> Configuring libffi for rch
> configure: WARNING: If you wanted to set the --build type, don't use 
> --host.
>     If a cross compiler is detected then cross compile mode will be used.
> Invalid configuration `rch-apple-darwin': machine `rch-apple' not 
> recognized
> configure: error: /bin/sh 
> /Library/Ruby/Gems/1.8/gems/ffi-1.0.11/ext/ffi_c/libffi/config.sub 
> rch-apple-darwin failed
> make[1]: *** No targets specified and no makefile found.  Stop.
> Configuring libffi for rch
> configure: WARNING: If you wanted to set the --build type, don't use 
> --host.
>     If a cross compiler is detected then cross compile mode will be used.
> Invalid configuration `rch-apple-darwin': machine `rch-apple' not 
> recognized
> configure: error: /bin/sh 
> /Library/Ruby/Gems/1.8/gems/ffi-1.0.11/ext/ffi_c/libffi/config.sub 
> rch-apple-darwin failed
> make[1]: *** No targets specified and no makefile found.  Stop.
> make: *** 
> ["/Library/Ruby/Gems/1.8/gems/ffi-1.0.11/ext/ffi_c/libffi"/.libs/libffi_convenience.a] 
> Error 2
>
>
> Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/ffi-1.0.11 
> for inspection.
> Results logged to 
> /Library/Ruby/Gems/1.8/gems/ffi-1.0.11/ext/ffi_c/gem_make.out
> 07:56:20 adrian@DeathStar-2 /source/phoenix $> 
>
>
------=_Part_4143_20962465.1330391954468
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

<div><br></div>That looks very odd. &nbsp;Basically, the shell variable is =
getting mangled somewhere ($$arch becomes rch when it is expanded). &nbsp;I=
 can't reproduce it on Lion, using the system ruby, or various custom ruby =
installs. &nbsp;Do you have a custom shell installed? &nbsp;(i.e. not bash)=
<div><br></div><div>Try the latest source - I've changed the universal buil=
d so it should be simpler.<br><br>On Saturday, 25 February 2012 22:59:51 UT=
C+10, Adrian  wrote:<blockquote class=3D"gmail_quote" style=3D"margin: 0;ma=
rgin-left: 0.8ex;border-left: 1px #ccc solid;padding-left: 1ex;">There stil=
l appears to be an issue install libffi in lion...<p>" &nbsp; If a cross co=
mpiler is detected then cross compile mode will be used."</p><p>Adrian</p><=
p></p><p><br>07:56:13 $&gt; sudo gem install ffi <br>Building native extens=
ions. &nbsp;This could take a while...<br>ERROR: &nbsp;Error installing ffi=
:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ERROR: Failed to build=
 gem native extension.</p><p>&nbsp; &nbsp; &nbsp; &nbsp; /System/Library/Fr=
ameworks/<wbr>Ruby.framework/Versions/1.8/<wbr>usr/bin/ruby extconf.rb<br>c=
hecking for ffi.h... no<br>checking for ffi.h in /usr/local/include... no<b=
r>checking for rb_thread_blocking_region()... no<br>checking for ruby_threa=
d_has_gvl_p()... no<br>checking for ruby_native_thread_p()... no<br>checkin=
g for rb_thread_call_with_gvl()... no<br>creating extconf.h<br>creating Mak=
efile</p><p>make<br>Configuring libffi for rch<br>configure: WARNING: If yo=
u wanted to set the --build type, don't use --host.<br>&nbsp; &nbsp; If a c=
ross compiler is detected then cross compile mode will be used.<br>Invalid =
configuration `rch-apple-darwin': machine `rch-apple' not recognized<br>con=
figure: error: /bin/sh /Library/Ruby/Gems/1.8/gems/<wbr>ffi-1.0.11/ext/ffi_=
c/libffi/<wbr>config.sub rch-apple-darwin failed<br>make[1]: *** No targets=
 specified and no makefile found. &nbsp;Stop.<br>Configuring libffi for rch=
<br>configure: WARNING: If you wanted to set the --build type, don't use --=
host.<br>&nbsp; &nbsp; If a cross compiler is detected then cross compile m=
ode will be used.<br>Invalid configuration `rch-apple-darwin': machine `rch=
-apple' not recognized<br>configure: error: /bin/sh /Library/Ruby/Gems/1.8/=
gems/<wbr>ffi-1.0.11/ext/ffi_c/libffi/<wbr>config.sub rch-apple-darwin fail=
ed<br>make[1]: *** No targets specified and no makefile found. &nbsp;Stop.<=
br>make: *** ["/Library/Ruby/Gems/1.8/gems/<wbr>ffi-1.0.11/ext/ffi_c/libffi=
"/.<wbr>libs/libffi_convenience.a] Error 2</p><p><br>Gem files will remain =
installed in /Library/Ruby/Gems/1.8/gems/<wbr>ffi-1.0.11 for inspection.<br=
>Results logged to /Library/Ruby/Gems/1.8/gems/<wbr>ffi-1.0.11/ext/ffi_c/ge=
m_make.<wbr>out<br>07:56:20 adrian@DeathStar-2 /source/phoenix $&gt; </p><p=
></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p></blockquote></div>
------=_Part_4143_20962465.1330391954468--
