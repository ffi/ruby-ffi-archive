Delivered-To: headius@headius.com
Received: by 10.142.239.15 with SMTP id m15csp48955wfh;
        Sat, 9 Jun 2012 08:53:01 -0700 (PDT)
Received: by 10.181.13.235 with SMTP id fb11mr8533612wid.3.1339257180857;
        Sat, 09 Jun 2012 08:53:00 -0700 (PDT)
Return-Path: <ruby-ffi+bncCP397LbnChDb4s3-BBoEpA5Bhg@googlegroups.com>
Received: from mail-wi0-f190.google.com (mail-wi0-f190.google.com [209.85.212.190])
        by mx.google.com with ESMTPS id z9si7330604wiv.46.2012.06.09.08.53.00
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 09 Jun 2012 08:53:00 -0700 (PDT)
Received-SPF: pass (google.com: domain of ruby-ffi+bncCP397LbnChDb4s3-BBoEpA5Bhg@googlegroups.com designates 209.85.212.190 as permitted sender) client-ip=209.85.212.190;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of ruby-ffi+bncCP397LbnChDb4s3-BBoEpA5Bhg@googlegroups.com designates 209.85.212.190 as permitted sender) smtp.mail=ruby-ffi+bncCP397LbnChDb4s3-BBoEpA5Bhg@googlegroups.com; dkim=pass header.i=@googlegroups.com
Received: by wibhn14 with SMTP id hn14sf2958131wib.7
        for <headius@headius.com>; Sat, 09 Jun 2012 08:53:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlegroups.com; s=beta;
        h=x-beenthere:received-spf:message-id:date:from:user-agent
         :mime-version:to:subject:references:in-reply-to:x-enigmail-version
         :content-type:x-virus-scanned:x-original-sender
         :x-original-authentication-results:reply-to:precedence:mailing-list
         :list-id:x-google-group-id:list-post:list-help:list-archive:sender
         :list-subscribe:list-unsubscribe;
        bh=pJt+lodeD49y3XRVj8bwxn54g43ZyQYlhEUuudvYXWQ=;
        b=Ue3Mc9f2o5DcHcwVOm1TWOnS27BigiRvDFJkMuBPkJENxJ//8O4clJCUHsbsI2LA3j
         rAAwKgOUSnnoyXvhdmyqbfa4BF+JW65/T3mpc2LbdwFctRAsPyguBQ00H5msNbTP6ofS
         YJgCO79V4Im+JwPpbmPr8o1TtPU84KkvZzQqo=
Received: by 10.216.135.99 with SMTP id t77mr240890wei.12.1339257179893;
        Sat, 09 Jun 2012 08:52:59 -0700 (PDT)
X-BeenThere: ruby-ffi@googlegroups.com
Received: by 10.14.99.194 with SMTP id x42ls1394918eef.6.gmail; Sat, 09 Jun
 2012 08:52:59 -0700 (PDT)
Received: by 10.14.127.4 with SMTP id c4mr3408492eei.3.1339257179233;
        Sat, 09 Jun 2012 08:52:59 -0700 (PDT)
Received: by 10.14.127.4 with SMTP id c4mr3408491eei.3.1339257179210;
        Sat, 09 Jun 2012 08:52:59 -0700 (PDT)
Received: from smtp-vbr7.xs4all.nl (smtp-vbr7.xs4all.nl. [194.109.24.27])
        by gmr-mx.google.com with ESMTP id b16si9657292eeg.3.2012.06.09.08.52.58;
        Sat, 09 Jun 2012 08:52:58 -0700 (PDT)
Received-SPF: neutral (google.com: 194.109.24.27 is neither permitted nor denied by best guess record for domain of matijs@matijs.net) client-ip=194.109.24.27;
Received: from [10.0.0.33] (mvz.xs4all.nl [83.163.118.181])
	(authenticated bits=0)
	by smtp-vbr7.xs4all.nl (8.13.8/8.13.8) with ESMTP id q59FqvT7043780
	(version=TLSv1/SSLv3 cipher=AES256-SHA bits=256 verify=NO)
	for <ruby-ffi@googlegroups.com>; Sat, 9 Jun 2012 17:52:58 +0200 (CEST)
	(envelope-from matijs@matijs.net)
Message-ID: <4FD37159.7080400@matijs.net>
Date: Sat, 09 Jun 2012 17:52:57 +0200
From: Matijs van Zuijlen <matijs@matijs.net>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:10.0.4) Gecko/20120510 Icedove/10.0.4
MIME-Version: 1.0
To: ruby-ffi@googlegroups.com
Subject: Re: [ruby-ffi] Make functions private by default?
References: <f1c6325f-5003-4feb-a3b1-cc64b7f5b663@p27g2000vbl.googlegroups.com>
In-Reply-To: <f1c6325f-5003-4feb-a3b1-cc64b7f5b663@p27g2000vbl.googlegroups.com>
X-Enigmail-Version: 1.4.1
Content-Type: multipart/signed; micalg=pgp-sha256;
 protocol="application/pgp-signature";
 boundary="------------enigDACA6CB61229EBA693B40F81"
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Original-Sender: matijs@matijs.net
X-Original-Authentication-Results: gmr-mx.google.com; spf=neutral (google.com:
 194.109.24.27 is neither permitted nor denied by best guess record for domain
 of matijs@matijs.net) smtp.mail=matijs@matijs.net
Reply-To: ruby-ffi@googlegroups.com
Precedence: list
Mailing-list: list ruby-ffi@googlegroups.com; contact ruby-ffi+owners@googlegroups.com
List-ID: <ruby-ffi.googlegroups.com>
X-Google-Group-Id: 238405446264
List-Post: <http://groups.google.com/group/ruby-ffi/post?hl=en_US>, <mailto:ruby-ffi@googlegroups.com>
List-Help: <http://groups.google.com/support/?hl=en_US>, <mailto:ruby-ffi+help@googlegroups.com>
List-Archive: <http://groups.google.com/group/ruby-ffi?hl=en_US>
Sender: ruby-ffi@googlegroups.com
List-Subscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=en_US>, <mailto:ruby-ffi+subscribe@googlegroups.com>
List-Unsubscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=en_US>,
 <mailto:googlegroups-manage+238405446264+unsubscribe@googlegroups.com>

This is an OpenPGP/MIME signed message (RFC 2440 and 3156)
--------------enigDACA6CB61229EBA693B40F81
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Daniel,

You can easily create a method attach_function_privately that combines th=
e calls
to attach_function and private_class_method.

Regards,
Matijs

On 09/06/12 17:25, Daniel Berger wrote:
> Hi,
>=20
> Is there a way to make the FFI function declarations private by
> default? I want to use the functions internally only. I don't want
> them exposed as part of a public API. Simply using the "private"
> keyword doesn't seem to work. Consider:
>=20
> require 'ffi'
>=20
> module Windows
>   extend FFI::Library
>   ffi_lib :kernel32
>=20
>   private
>=20
>   attach_function :CloseHandle, [:ulong], :bool
> end
>=20
> p Windows.methods(false) # =3D> [:CloseHandle]
>=20
> The only way to make it work is to call private_class_method on the
> functions after the fact, so it can be done. I was just hoping there
> was a nicer way to do them "en masse" as it were.
>=20
> Perhaps if attach_function is called in the context of private
> automatically declare them private_class_methods? Although I don't
> actually know if that's possible in Ruby. :)
>=20
> Regards,
>=20
> Dan


--=20
Matijs


--------------enigDACA6CB61229EBA693B40F81
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)

iQEVAwUBT9NxWZZ5CSFec8nfAQhdcAf/RaBVlqSRJBTwFdyxruQWYxvGaVTXCHnk
GXcVqiemO1sWMowECGh44D4mpJU+7E6TWVWlt2DWYcKF3j03ezyVYufM8tvJNhuk
huAx7RRQRTq9h/eJ3dTnogzvLL6klHZYad7JswoOQW08firMYfI2N0+VMwYur7Ty
KRcWuMfb1WBqB0kO6+TtPIbOKaTQkqMBFiOL4jbnx2yQALSrwqNgxVsCCG+QhY3d
zLwCN9hs/sYZRb8J4TOZxzvVL8S6uf/tjjdYw9TmSzsSn8T+F98FAGmkbn1OJH6R
0zoKHcmKMcRWo7M+RJE6RpDz6z5NNXMkvKPLRHBmr/pTpcwp4+nLjQ==
=hJt1
-----END PGP SIGNATURE-----

--------------enigDACA6CB61229EBA693B40F81--
