Delivered-To: headius@headius.com
Received: by 10.100.134.8 with SMTP id h8cs368401and;
        Fri, 18 Dec 2009 06:14:04 -0800 (PST)
Received: by 10.101.7.35 with SMTP id k35mr6095637ani.179.1261145644218;
        Fri, 18 Dec 2009 06:14:04 -0800 (PST)
Return-Path: <3KY4rSwoJCC4TYX.PYbeWcQWKSV.MYWbeLi-PPSQYYQVOQbYeZc.MYW@listserv.bounces.google.com>
Received: from mail-yw0-f144.google.com (mail-yw0-f144.google.com [209.85.211.144])
        by mx.google.com with ESMTP id 29si6249193yxe.107.2009.12.18.06.14.03;
        Fri, 18 Dec 2009 06:14:03 -0800 (PST)
Received-SPF: pass (google.com: domain of 3KY4rSwoJCC4TYX.PYbeWcQWKSV.MYWbeLi-PPSQYYQVOQbYeZc.MYW@listserv.bounces.google.com designates 209.85.211.144 as permitted sender) client-ip=209.85.211.144;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of 3KY4rSwoJCC4TYX.PYbeWcQWKSV.MYWbeLi-PPSQYYQVOQbYeZc.MYW@listserv.bounces.google.com designates 209.85.211.144 as permitted sender) smtp.mail=3KY4rSwoJCC4TYX.PYbeWcQWKSV.MYWbeLi-PPSQYYQVOQbYeZc.MYW@listserv.bounces.google.com; dkim=pass (test mode) header.i=@googlegroups.com
Received: by ywh8 with SMTP id 8sf7570357ywh.3
        for <headius@headius.com>; Fri, 18 Dec 2009 06:14:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlegroups.com; s=beta;
        h=domainkey-signature:received:x-beenthere:received:received:received
         :received:received-spf:received:received:received:date:from:to
         :subject:message-id:in-reply-to:references:x-mailer:mime-version
         :x-original-authentication-results:x-original-sender:reply-to
         :precedence:mailing-list:list-id:list-post:list-help:list-archive
         :x-thread-url:x-message-url:sender:list-unsubscribe:list-subscribe
         :content-type:content-transfer-encoding;
        bh=XxhuU1mTZdaValJ8FEwCwX/wHhpdVLfMIQe0bDVZM4k=;
        b=7AfgGOv+rkiUv7zP0+WtIV6pKiHgQKIeUaR/WyO4gowZbNumX3/YeNY5dlh0sRrcBq
         sIcKH8g6CIjkpOsedPV0L7pqSTrJL+8YLCkU/COXdWvWgjron6BEn1YpIjbgxorhAHa2
         yraBS4IUBArBG2BVmlq0zcNqO9YZQNMasK2LQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlegroups.com; s=beta;
        h=x-beenthere:received-spf:date:from:to:subject:message-id
         :in-reply-to:references:x-mailer:mime-version
         :x-original-authentication-results:x-original-sender:reply-to
         :precedence:mailing-list:list-id:list-post:list-help:list-archive
         :x-thread-url:x-message-url:sender:list-unsubscribe:list-subscribe
         :content-type:content-transfer-encoding;
        b=t3xNhnaZlstP9PjedqpeX7CYprkUuIzJVxWTzh2LZDmJBtu3JOCYECE2th8v8BD/nX
         AG7JTj+Sz9g1ELGBBKg2s8j+W1w/gewUnCsusY2vLq+yjz2TWCRQfbOqSmZvmn59WJQX
         RgDFRszpuK7FtPBVuT0bHhq9YOadWF3EgU5Sg=
Received: by 10.91.210.5 with SMTP id m5mr253062agq.17.1261145642018;
        Fri, 18 Dec 2009 06:14:02 -0800 (PST)
X-BeenThere: ruby-ffi@googlegroups.com
Received: by 10.231.123.103 with SMTP id o39ls9827ibr.3.p; Fri, 18 Dec 2009 
	06:14:01 -0800 (PST)
Received: by 10.231.172.83 with SMTP id k19mr272678ibz.29.1261145640917;
        Fri, 18 Dec 2009 06:14:00 -0800 (PST)
Received: by 10.231.172.83 with SMTP id k19mr272677ibz.29.1261145640875;
        Fri, 18 Dec 2009 06:14:00 -0800 (PST)
Return-Path: <jon.forums@gmail.com>
Received: from mail-iw0-f177.google.com (mail-iw0-f177.google.com [209.85.223.177])
        by gmr-mx.google.com with ESMTP id 25si329730iwn.14.2009.12.18.06.13.59;
        Fri, 18 Dec 2009 06:13:59 -0800 (PST)
Received-SPF: pass (google.com: domain of jon.forums@gmail.com designates 209.85.223.177 as permitted sender) client-ip=209.85.223.177;
Received: by iwn7 with SMTP id 7so2178461iwn.7
        for <ruby-ffi@googlegroups.com>; Fri, 18 Dec 2009 06:13:59 -0800 (PST)
Received: by 10.231.123.41 with SMTP id n41mr1855442ibr.46.1261145639655;
        Fri, 18 Dec 2009 06:13:59 -0800 (PST)
Return-Path: <jon.forums@gmail.com>
Received: from Red (rrcs-24-172-153-250.central.biz.rr.com [24.172.153.250])
        by mx.google.com with ESMTPS id 23sm2205085iwn.11.2009.12.18.06.13.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 18 Dec 2009 06:13:57 -0800 (PST)
Date: Fri, 18 Dec 2009 09:13:48 -0500
From: Jon <jon.forums@gmail.com>
To: ruby-ffi@googlegroups.com
Subject: Re: [ruby-ffi] re: Automatic Struct Layout
Message-Id: <20091218091348.8e3d4999.jon.forums@gmail.com>
In-Reply-To: <4ccee320912171641q65258b4fmce2cd864b231c5f1@mail.gmail.com>
References: <1b8c6f0c-e50e-4ffa-9299-8ed6bda540fe@26g2000yqo.googlegroups.com>
	<4ccee320912171641q65258b4fmce2cd864b231c5f1@mail.gmail.com>
X-Mailer: Sylpheed 2.7.1 (GTK+ 2.10.14; i686-pc-mingw32)
Mime-Version: 1.0
X-Original-Authentication-Results: gmr-mx.google.com; spf=pass (google.com: 
	domain of jon.forums@gmail.com designates 209.85.223.177 as permitted sender) 
	smtp.mail=jon.forums@gmail.com; dkim=pass (test mode) header.i=@gmail.com
X-Original-Sender: jon.forums@gmail.com
Reply-To: ruby-ffi@googlegroups.com
Precedence: list
Mailing-list: list ruby-ffi@googlegroups.com; contact ruby-ffi+owners@googlegroups.com
List-ID: <ruby-ffi.googlegroups.com>
List-Post: <http://groups.google.com/group/ruby-ffi/post?hl=>, 
	<mailto:ruby-ffi@googlegroups.com>
List-Help: <http://groups.google.com/support/?hl=>, <mailto:ruby-ffi+help@googlegroups.com>
List-Archive: <http://groups.google.com/group/ruby-ffi?hl=>
X-Thread-Url: http://groups.google.com/group/ruby-ffi/t/2294588e96c46a8c
X-Message-Url: http://groups.google.com/group/ruby-ffi/msg/fd190de6cc15ac6b
Sender: ruby-ffi@googlegroups.com
List-Unsubscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=>, 
	<mailto:ruby-ffi+unsubscribe@googlegroups.com>
List-Subscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=>, 
	<mailto:ruby-ffi+subscribe@googlegroups.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On Fri, 18 Dec 2009 10:41:39 +1000
Wayne Meissner <wmeissner@gmail.com> wrote:

> 2009/12/18 rogerdpack <rogerpack2005@gmail.com>:
> > Question.
> > Shouldn't ffi be calculating the offsets automagically for us, since
> > all that is distributed is ruby code, and "automatic struct layout"
> > thence not be necessary? =A0I would have expected that...
>=20
>=20
> It does, the wiki just hasn't been updated ... in about a year - so
> feel free to fix it up.
>=20
> Basically, to have FFI calculate offsets for you, you drop off the
> offset out of the triplet.
>=20
> i.e. instead of
> class Foo < FFI::Struct
>   layout :a, :long, 0, :b, :int, 4
> end
>=20
> You would use:
> class Foo < FFI::Struct
>   layout :a, :long, :b, :int
> end
>=20
> That will calculate the offset of :b automatically for you, and take
> into account 32bit vs 64bit, minimum alignments, tail padding, etc.

We need a Struct wiki page similar to what jacius did for Enums anyway.

Is there any reason why Wayne shouldn't just delete the automatic struct la=
yout page once the struct page exists?

Jon
