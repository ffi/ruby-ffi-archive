Delivered-To: headius@headius.com
Received: by 10.100.134.8 with SMTP id h8cs115723and;
        Mon, 14 Dec 2009 08:35:12 -0800 (PST)
Received: by 10.224.109.141 with SMTP id j13mr3068992qap.84.1260808511723;
        Mon, 14 Dec 2009 08:35:11 -0800 (PST)
Return-Path: <3PmkmSwoJCBk8DC.4DGJBH5Bz7A.1DBGJ0N-4475DD5A35GDJEH.1DB@listserv.bounces.google.com>
Received: from mail-qy0-f162.google.com (mail-qy0-f162.google.com [209.85.221.162])
        by mx.google.com with ESMTP id 33si8849669qyk.94.2009.12.14.08.35.11;
        Mon, 14 Dec 2009 08:35:11 -0800 (PST)
Received-SPF: pass (google.com: domain of 3PmkmSwoJCBk8DC.4DGJBH5Bz7A.1DBGJ0N-4475DD5A35GDJEH.1DB@listserv.bounces.google.com designates 209.85.221.162 as permitted sender) client-ip=209.85.221.162;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of 3PmkmSwoJCBk8DC.4DGJBH5Bz7A.1DBGJ0N-4475DD5A35GDJEH.1DB@listserv.bounces.google.com designates 209.85.221.162 as permitted sender) smtp.mail=3PmkmSwoJCBk8DC.4DGJBH5Bz7A.1DBGJ0N-4475DD5A35GDJEH.1DB@listserv.bounces.google.com
Received: by qyk34 with SMTP id 34sf5672004qyk.13
        for <headius@headius.com>; Mon, 14 Dec 2009 08:35:11 -0800 (PST)
Received: by 10.229.128.220 with SMTP id l28mr12649qcs.12.1260808510571;
        Mon, 14 Dec 2009 08:35:10 -0800 (PST)
X-BeenThere: ruby-ffi@googlegroups.com
Received: by 10.229.100.199 with SMTP id z7ls2055214qcn.0.p; Mon, 14 Dec 2009 
	08:35:09 -0800 (PST)
Received: by 10.229.129.40 with SMTP id m40mr710627qcs.14.1260808509590;
        Mon, 14 Dec 2009 08:35:09 -0800 (PST)
Received: by 10.229.129.40 with SMTP id m40mr710626qcs.14.1260808509561;
        Mon, 14 Dec 2009 08:35:09 -0800 (PST)
Return-Path: <jon.forums@gmail.com>
Received: from qw-out-1920.google.com (qw-out-1920.google.com [74.125.92.144])
        by gmr-mx.google.com with ESMTP id 25si1113819qyk.15.2009.12.14.08.35.08;
        Mon, 14 Dec 2009 08:35:08 -0800 (PST)
Received-SPF: pass (google.com: domain of jon.forums@gmail.com designates 74.125.92.144 as permitted sender) client-ip=74.125.92.144;
Received: by qw-out-1920.google.com with SMTP id 5so797742qwc.0
        for <ruby-ffi@googlegroups.com>; Mon, 14 Dec 2009 08:35:08 -0800 (PST)
Received: by 10.224.4.28 with SMTP id 28mr3051861qap.286.1260808496318;
        Mon, 14 Dec 2009 08:34:56 -0800 (PST)
Return-Path: <jon.forums@gmail.com>
Received: from Red (rrcs-24-172-153-250.central.biz.rr.com [24.172.153.250])
        by mx.google.com with ESMTPS id 22sm3716533iwn.12.2009.12.14.08.34.52
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 14 Dec 2009 08:34:54 -0800 (PST)
Date: Mon, 14 Dec 2009 11:33:56 -0500
From: Jon <jon.forums@gmail.com>
To: ruby-ffi@googlegroups.com
Subject: Re: [ruby-ffi] Re: segfault on windows MRI but not windows JRuby
Message-Id: <20091214113356.a4e30c0f.jon.forums@gmail.com>
In-Reply-To: <d96ec452-bbd1-4741-bb53-2bdfdb1be5b8@z3g2000prd.googlegroups.com>
References: <20091127124131.0f3ca7b2.jon.forums@gmail.com>
	<d96ec452-bbd1-4741-bb53-2bdfdb1be5b8@z3g2000prd.googlegroups.com>
X-Mailer: Sylpheed 2.7.1 (GTK+ 2.10.14; i686-pc-mingw32)
Mime-Version: 1.0
X-Original-Authentication-Results: gmr-mx.google.com; spf=pass (google.com: 
	domain of jon.forums@gmail.com designates 74.125.92.144 as permitted sender) 
	smtp.mail=jon.forums@gmail.com; dkim=pass (test mode) header.i=@gmail.com
X-Original-Sender: jon.forums@gmail.com
Reply-To: ruby-ffi@googlegroups.com
Precedence: list
Mailing-list: list ruby-ffi@googlegroups.com; contact ruby-ffi+owners@googlegroups.com
List-ID: <ruby-ffi.googlegroups.com>
List-Post: <http://groups.google.com/group/ruby-ffi/post?hl=>, 
	<mailto:ruby-ffi@googlegroups.com>
List-Help: <http://groups.google.com/support/?hl=>, <mailto:ruby-ffi+help@googlegroups.com>
List-Archive: <http://groups.google.com/group/ruby-ffi?hl=>
X-Thread-Url: http://groups.google.com/group/ruby-ffi/t/1712f5507b15b467
X-Message-Url: http://groups.google.com/group/ruby-ffi/msg/ebf4608f5ef654af
Sender: ruby-ffi@googlegroups.com
List-Unsubscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=>, 
	<mailto:ruby-ffi+unsubscribe@googlegroups.com>
List-Subscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=>, 
	<mailto:ruby-ffi+subscribe@googlegroups.com>
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

On Fri, 11 Dec 2009 14:25:30 -0800 (PST)
neetpgr <neetpgr@gmail.com> wrote:

> lib/ffi/library.rb in gem is old, so every callback's convention
> is :default.

Where do you see this in the 0.5.4 library.rb code?

On line 64, shouldn't this code

  options[:convention] = defined?(@ffi_convention) ? @ffi_convention : :default

take care of the calling convention (even for callbacks) as long as you've explicity called ffi_convention before attach_function?

Jon
