<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Re: [ruby-ffi] Re: segfault on windows MRI but not windows JRuby</title>
<link rel="important stylesheet" href="">
<style>div.headerdisplayname {font-weight:bold;}</style></head>
<body>
<table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part1"><tr><td><div class="headerdisplayname" style="display:inline;">Subject: </div>Re: [ruby-ffi] Re: segfault on windows MRI but not windows JRuby</td></tr><tr><td><div class="headerdisplayname" style="display:inline;">From: </div>Jon <jon.forums@gmail.com></td></tr><tr><td><div class="headerdisplayname" style="display:inline;">Date: </div>12/15/09 10:19 AM</td></tr></table><table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part2"><tr><td><div class="headerdisplayname" style="display:inline;">To: </div>ruby-ffi@googlegroups.com</td></tr></table><br>
<div class="moz-text-plain" wrap=true graphical-quote=true style="font-family: -moz-fixed; font-size: 12px;" lang="x-western"><pre wrap>
</pre><blockquote type=cite style="color: #000000;"><pre wrap>
<span class="moz-txt-citetags">&gt; </span>How about this?
<span class="moz-txt-citetags">&gt; </span><a class="moz-txt-link-freetext" href="http://gist.github.com/256660">http://gist.github.com/256660</a>
</pre></blockquote><pre wrap>

The gist works on my "ruby 1.9.1p243 (2009-07-16 revision 24175) [i386-mingw32]" without a segfault <span class="moz-smiley-s1" title=":)"><span>:)</span></span>

...and I now see your point about the outdated "callback" in library.rb in 0.5.4 that's now been updated in master.  Thank you.


FYI, the same gist on my JRuby 1.4.0 (1.8 and 1.9 modes) gives the following

C:\Users\Jon\Documents\RubyDev\sandbox&gt;jruby ffi_enumwin_fix.rb
ffi_enumwin_fix.rb:15:in `callback': wrong # of arguments(3 for 2) (ArgumentError)
        from ffi_enumwin_fix.rb:35

...which looking over JRuby's lib/ruby/site_ruby/shared/ffi/library.rb shows the same outdated "callback" which I just noticed as of this morning hasn't yet been committed to <a class="moz-txt-link-freetext" href="http://github.com/jruby/jruby/blob/master/lib/ruby/site_ruby/shared/ffi/library.rb">http://github.com/jruby/jruby/blob/master/lib/ruby/site_ruby/shared/ffi/library.rb</a>
</pre></div></body>
</html>
</table></div>