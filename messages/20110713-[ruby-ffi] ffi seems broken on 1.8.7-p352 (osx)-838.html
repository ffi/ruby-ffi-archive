<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>[ruby-ffi] ffi seems broken on 1.8.7-p352 (osx)</title>
<link rel="important stylesheet" href="">
<style>div.headerdisplayname {font-weight:bold;}</style></head>
<body>
<table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part1"><tr><td><div class="headerdisplayname" style="display:inline;">Subject: </div>[ruby-ffi] ffi seems broken on 1.8.7-p352 (osx)</td></tr><tr><td><div class="headerdisplayname" style="display:inline;">From: </div>Tim Becker <a2800276@gmail.com></td></tr><tr><td><div class="headerdisplayname" style="display:inline;">Date: </div>7/13/11 9:20 AM</td></tr></table><table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part2"><tr><td><div class="headerdisplayname" style="display:inline;">To: </div>ruby-ffi <ruby-ffi@googlegroups.com></td></tr></table><br>
<div class="moz-text-plain" wrap=true graphical-quote=true style="font-family: -moz-fixed; font-size: 12px;" lang="x-western"><pre wrap>
Hi,

not sure if I'm doing something entirely wrong, but it seems that
something broke with the release of the new 1.8.7-p352 release, ruby
segfaults immediately on `require`. I'm currently not able to look
into this more deeply, but I though it may be of interest.

Segfault happens immediately on p352 put not on an older version
(p302). I'm using ffi version 1.0.9 on both. OSX 10.6.8. libffi 3.0.9
installed via ports. Let me know if I can provide any more
information.

Cheers,
   -tim


-------------8&lt;----------------------------------------
(16:09) ~$ rvm 1.8.7
(16:09) ~$ rvm list

rvm rubies

   rbx-1.0.1-20100603 [ x86_64 ]
   ruby-1.8.7-head [ x86_64 ]
   ruby-1.8.7-p302 [ x86_64 ]
=&gt; ruby-1.8.7-p352 [ x86_64 ]
   ruby-1.9.2-p0 [ x86_64 ]

(16:09) ~$ ruby -rubygems
puts require 'ffi'^D
<i class="moz-txt-slash"><span class="moz-txt-tag">/</span>Users/tbe<span class="moz-txt-tag">/</span></i>.rvm/gems/ruby-1.8.7-p352/gems/ffi-1.0.9/lib/ffi_c.bundle:
[BUG] Segmentation fault
ruby 1.8.7 (2011-06-30 patchlevel 352) [i686-darwin10.8.0]


Abort trap
(16:10) ~$
(16:10) ~$ rvm ruby-1.8.7-p302
(16:10) ~$ ruby -rubygems
puts require 'ffi'^D
true

-------------8&lt;----------------------------------------




</pre></div></body>
</html>
</table></div>