<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>[ruby-ffi] Best way to handle constants</title>
<link rel="important stylesheet" href="">
<style>div.headerdisplayname {font-weight:bold;}</style></head>
<body>
<table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part1"><tr><td><div class="headerdisplayname" style="display:inline;">Subject: </div>[ruby-ffi] Best way to handle constants</td></tr><tr><td><div class="headerdisplayname" style="display:inline;">From: </div>Maurizio De Santis <desantis.maurizio@gmail.com></td></tr><tr><td><div class="headerdisplayname" style="display:inline;">Date: </div>10/15/13 4:58 AM</td></tr></table><table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part2"><tr><td><div class="headerdisplayname" style="display:inline;">To: </div>ruby-ffi@googlegroups.com</td></tr></table><br>
<div class="moz-text-html"  lang="x-western"><div dir="ltr">Hello,<br><br>I'm writing a wrapper for libgtop2 using ruby-ffi. I would like to read some constants (mainly version, in order to warn the user about having installed the right version). I have some doubts:<br><ul><li>FFI::ConstGenerator seems to be not so popular between projects using ffi. I'm trying to use it and I found that probably its disadvantage is that you have to specify cppflags in order to make it work; for example on my machine I have to use it in this way to make it work:</li></ul><p><span style="font-family: courier new,monospace;">&nbsp;&nbsp;&nbsp; cg = FFI::ConstGenerator.new('libgtop-2.0', cppflags: '-I/usr/include/libgtop-2.0 -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include') do |gen|<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gen.include 'glibtop.h'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gen.const(:LIBGTOP_MAJOR_VERSION)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gen.const(:LIBGTOP_MINOR_VERSION)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gen.const(:LIBGTOP_MICRO_VERSION)<br>&nbsp;&nbsp;&nbsp; end<br>&nbsp;&nbsp;&nbsp; puts cg.to_ruby</span></p><p style="margin-left: 40px;">It seems to me that cppflags value is strongly dependent from the environment (OS and user customizations). Maybe reading LD configurations could help, but I'm not skilled in C-C++ management, so I'm pretty unsure about it.<br></p><ul><li>Are there any other advantages/disadvantages I didn't consider? Do you have suggestions about how to mitigate these issues, or alternatives to FFI::ConstGenerator?</li></ul><p>Thank you<br></p></div>

<p></p>

-- <br />
&nbsp;<br />
--- <br />
You received this message because you are subscribed to the Google Groups &quot;ruby-ffi&quot; group.<br />
To unsubscribe from this group and stop receiving emails from it, send an email to ruby-ffi+unsubscribe@googlegroups.com.<br />
For more options, visit <a href="https://groups.google.com/groups/opt_out">https://groups.google.com/groups/opt_out</a>.<br />

</div></body>
</html>
</table></div>