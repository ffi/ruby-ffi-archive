Delivered-To: headius@headius.com
Received: by 10.100.134.8 with SMTP id h8cs218181and;
        Tue, 15 Dec 2009 22:30:32 -0800 (PST)
Received: by 10.101.134.40 with SMTP id l40mr823034ann.126.1260945031252;
        Tue, 15 Dec 2009 22:30:31 -0800 (PST)
Return-Path: <3hX4oSwoJCHcgpdngVqZiVbhVdg.XjhmpWt-aadbjjbgZbmjpkn.Xjh@listserv.bounces.google.com>
Received: from mail-gx0-f197.google.com (mail-gx0-f197.google.com [209.85.217.197])
        by mx.google.com with ESMTP id 5si2659629yxe.52.2009.12.15.22.30.30;
        Tue, 15 Dec 2009 22:30:30 -0800 (PST)
Received-SPF: pass (google.com: domain of 3hX4oSwoJCHcgpdngVqZiVbhVdg.XjhmpWt-aadbjjbgZbmjpkn.Xjh@listserv.bounces.google.com designates 209.85.217.197 as permitted sender) client-ip=209.85.217.197;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of 3hX4oSwoJCHcgpdngVqZiVbhVdg.XjhmpWt-aadbjjbgZbmjpkn.Xjh@listserv.bounces.google.com designates 209.85.217.197 as permitted sender) smtp.mail=3hX4oSwoJCHcgpdngVqZiVbhVdg.XjhmpWt-aadbjjbgZbmjpkn.Xjh@listserv.bounces.google.com; dkim=pass (test mode) header.i=@googlegroups.com
Received: by gxk21 with SMTP id 21sf1462531gxk.7
        for <headius@headius.com>; Tue, 15 Dec 2009 22:30:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlegroups.com; s=beta;
        h=domainkey-signature:received:x-beenthere:received:received:received
         :received:received-spf:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to
         :x-original-authentication-results:x-original-sender:reply-to
         :precedence:mailing-list:list-id:list-post:list-help:list-archive
         :x-thread-url:x-message-url:sender:list-unsubscribe:list-subscribe
         :content-type:content-transfer-encoding;
        bh=9kv91CnYlfVbyTZUHGiNFl3uZs7HHfpzutOWDvgliKs=;
        b=h7xSXO1gfe/nEfcr+Azkre/IgonNLg3TeJLOdKTR9+w5RKMLwl5CQRZ/e6EuoXI+mZ
         XwrcAI8/5kX3wzcnBIf993G2lOR/FwUTo8Qs4HdGUNaa6BdOSIPdZQyZlrioLugWQg24
         Y3zZF88Fi0HHdoP5pegIp4DtH3eIgx74ogvOI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlegroups.com; s=beta;
        h=x-beenthere:received-spf:mime-version:in-reply-to:references:from
         :date:message-id:subject:to:x-original-authentication-results
         :x-original-sender:reply-to:precedence:mailing-list:list-id
         :list-post:list-help:list-archive:x-thread-url:x-message-url:sender
         :list-unsubscribe:list-subscribe:content-type
         :content-transfer-encoding;
        b=SgY/6RxiwaIMbZboaQ6RZ0PndycXQQglJkpXfL2dBFd7Mq67YPjaYkkksPikd3PFMB
         m0l4awQ6d89xLyk11YyMS8qfO1xp2fbJ8mS8+tR7ZqgFrp5fye9a/pHYlSAIpR15vyjc
         89UmeUV0I5kO96IeruvIaaL/XCYHcvwVobhjg=
Received: by 10.91.41.14 with SMTP id t14mr128730agj.37.1260945029215;
        Tue, 15 Dec 2009 22:30:29 -0800 (PST)
X-BeenThere: ruby-ffi@googlegroups.com
Received: by 10.204.5.70 with SMTP id 6ls110921bku.1.p; Tue, 15 Dec 2009 
	22:30:27 -0800 (PST)
Received: by 10.204.130.85 with SMTP id r21mr17600bks.8.1260945027700;
        Tue, 15 Dec 2009 22:30:27 -0800 (PST)
Received: by 10.204.130.85 with SMTP id r21mr17599bks.8.1260945027680;
        Tue, 15 Dec 2009 22:30:27 -0800 (PST)
Return-Path: <luislavena@gmail.com>
Received: from mail-fx0-f212.google.com (mail-fx0-f212.google.com [209.85.220.212])
        by gmr-mx.google.com with ESMTP id 12si50958bwz.6.2009.12.15.22.30.26;
        Tue, 15 Dec 2009 22:30:26 -0800 (PST)
Received-SPF: pass (google.com: domain of luislavena@gmail.com designates 209.85.220.212 as permitted sender) client-ip=209.85.220.212;
Received: by fxm4 with SMTP id 4so605597fxm.12
        for <ruby-ffi@googlegroups.com>; Tue, 15 Dec 2009 22:30:26 -0800 (PST)
MIME-Version: 1.0
Received: by 10.239.136.133 with SMTP id h5mr54769hbh.126.1260945026075; Tue, 
	15 Dec 2009 22:30:26 -0800 (PST)
In-Reply-To: <20091215111914.75bc112a.jon.forums@gmail.com>
References: <20091127124131.0f3ca7b2.jon.forums@gmail.com> 
	<d96ec452-bbd1-4741-bb53-2bdfdb1be5b8@z3g2000prd.googlegroups.com> 
	<20091214113356.a4e30c0f.jon.forums@gmail.com> <8dd3dbc5-343f-4563-b19d-802ddc72652b@x5g2000prf.googlegroups.com> 
	<20091215111914.75bc112a.jon.forums@gmail.com>
From: Luis Lavena <luislavena@gmail.com>
Date: Wed, 16 Dec 2009 03:30:06 -0300
Message-ID: <71166b3b0912152230u7bdfabafse4a4968ee050a071@mail.gmail.com>
Subject: Re: [ruby-ffi] Re: segfault on windows MRI but not windows JRuby
To: ruby-ffi@googlegroups.com
X-Original-Authentication-Results: gmr-mx.google.com; spf=pass (google.com: 
	domain of luislavena@gmail.com designates 209.85.220.212 as permitted sender) 
	smtp.mail=luislavena@gmail.com; dkim=pass (test mode) header.i=@gmail.com
X-Original-Sender: luislavena@gmail.com
Reply-To: ruby-ffi@googlegroups.com
Precedence: list
Mailing-list: list ruby-ffi@googlegroups.com; contact ruby-ffi+owners@googlegroups.com
List-ID: <ruby-ffi.googlegroups.com>
List-Post: <http://groups.google.com/group/ruby-ffi/post?hl=>, 
	<mailto:ruby-ffi@googlegroups.com>
List-Help: <http://groups.google.com/support/?hl=>, <mailto:ruby-ffi+help@googlegroups.com>
List-Archive: <http://groups.google.com/group/ruby-ffi?hl=>
X-Thread-Url: http://groups.google.com/group/ruby-ffi/t/1712f5507b15b467
X-Message-Url: http://groups.google.com/group/ruby-ffi/msg/28aa9fa7e1764c28
Sender: ruby-ffi@googlegroups.com
List-Unsubscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=>, 
	<mailto:ruby-ffi+unsubscribe@googlegroups.com>
List-Subscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=>, 
	<mailto:ruby-ffi+subscribe@googlegroups.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On Tue, Dec 15, 2009 at 1:19 PM, Jon <jon.forums@gmail.com> wrote:
>> How about this?
>> http://gist.github.com/256660
>
> The gist works on my "ruby 1.9.1p243 (2009-07-16 revision 24175) [i386-mi=
ngw32]" without a segfault :)
>

I can confirm this gist works on the following versions:

ruby 1.8.6 (2009-08-04 patchlevel 383) [i386-mingw32]

ruby 1.9.1p129 (2009-05-12 revision 23412) [i386-mingw32]

ruby 1.9.1p243 (2009-07-16 revision 24175) [i386-mingw32]

ruby 1.9.1p376 (2009-12-07 revision 26041) [i386-mingw32]

ruby 1.9.2dev (2009-11-11 trunk 25717) [i386-mingw32]

ruby 1.8.6 (2009-03-31 patchlevel 368) [i386-mswin32]

ruby 1.9.1p129 (2009-05-12 revision 23412) [i386-mswin32]

> ...and I now see your point about the outdated "callback" in library.rb i=
n 0.5.4 that's now been updated in master. =A0Thank you.
>
>
> FYI, the same gist on my JRuby 1.4.0 (1.8 and 1.9 modes) gives the follow=
ing
>
> C:\Users\Jon\Documents\RubyDev\sandbox>jruby ffi_enumwin_fix.rb
> ffi_enumwin_fix.rb:15:in `callback': wrong # of arguments(3 for 2) (Argum=
entError)
> =A0 =A0 =A0 =A0from ffi_enumwin_fix.rb:35
>
> ...which looking over JRuby's lib/ruby/site_ruby/shared/ffi/library.rb sh=
ows the same outdated "callback" which I just noticed as of this morning ha=
sn't yet been committed to http://github.com/jruby/jruby/blob/master/lib/ru=
by/site_ruby/shared/ffi/library.rb
>

Looks like a bug report to JRuby is needed?
--=20
Luis Lavena
AREA 17
-
Perfection in design is achieved not when there is nothing more to add,
but rather when there is nothing more to take away.
Antoine de Saint-Exup=E9ry
