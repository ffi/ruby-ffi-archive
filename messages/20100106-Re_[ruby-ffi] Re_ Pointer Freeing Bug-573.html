<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Re: [ruby-ffi] Re: Pointer Freeing Bug</title>
<link rel="important stylesheet" href="">
<style>div.headerdisplayname {font-weight:bold;}</style></head>
<body>
<table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part1"><tr><td><div class="headerdisplayname" style="display:inline;">Subject: </div>Re: [ruby-ffi] Re: Pointer Freeing Bug</td></tr><tr><td><div class="headerdisplayname" style="display:inline;">From: </div>Shawn Anderson <shawn42@gmail.com></td></tr><tr><td><div class="headerdisplayname" style="display:inline;">Date: </div>1/6/10 7:48 PM</td></tr></table><table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part2"><tr><td><div class="headerdisplayname" style="display:inline;">To: </div>ruby-ffi@googlegroups.com</td></tr></table><br>
<div class="moz-text-html"  lang="x-western">Also,<br>To help verify if it is indeed a GC problem, I&#39;ve found that adding GC.disable at the beginning of your code can tell you if the GC is what is causing problems.<br><br>/Shawn<br><br><div class="gmail_quote">On Wed, Jan 6, 2010 at 5:28 PM, Jon <span dir="ltr">&lt;<a href="mailto:jon.forums@gmail.com">jon.forums@gmail.com</a>&gt;</span> wrote:<br>

<blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;"><div><div></div><div class="h5">&gt; On Jan 6, 2:43 pm, JEG2 &lt;<a href="mailto:ja...@graysoftinc.com">ja...@graysoftinc.com</a>&gt; wrote:<br>


&gt; &gt; It seems to work, but I wasn&#39;t sure how to define the size_t<br>
&gt; &gt; parameter.  I assumed it&#39;s an unsigned long and defined it as such:<br>
&gt; &gt;<br>
&gt; &gt;     func :name    =&gt; :malloc,<br>
&gt; &gt;          :args    =&gt; :ulong,<br>
&gt; &gt;          :returns =&gt; :pointer<br>
&gt; &gt;<br>
&gt; &gt; Can I really count on that though?  Is it portable?<br>
&gt;<br>
&gt; Ah, FFI does support size_t.  It&#39;s just not listed here:<br>
&gt;<br>
&gt; <a href="http://wiki.github.com/ffi/ffi/types" target="_blank">http://wiki.github.com/ffi/ffi/types</a><br>
&gt;<br>
&gt; I&#39;ve switched to using that.<br>
&gt;<br>
&gt; James Edward Gray II<br>
<br>
<br>
</div></div>Is size_t portable across FFI impls?<br>
<font color="#888888"><br>
Jon<br>
</font></blockquote></div><br>

</div></body>
</html>
</table></div>