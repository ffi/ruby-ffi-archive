Delivered-To: headius@headius.com
Received: by 10.182.38.198 with SMTP id i6cs1893obk;
        Sun, 23 Oct 2011 11:52:17 -0700 (PDT)
Received: by 10.68.38.41 with SMTP id d9mr23156770pbk.103.1319395936603;
        Sun, 23 Oct 2011 11:52:16 -0700 (PDT)
Return-Path: <ruby-ffi+bncCMPYuayYERDcxJH1BBoEm08qZA@googlegroups.com>
Received: from mail-pz0-f62.google.com (mail-pz0-f62.google.com [209.85.210.62])
        by mx.google.com with ESMTPS id b2si18053224pbg.171.2011.10.23.11.52.16
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 23 Oct 2011 11:52:16 -0700 (PDT)
Received-SPF: pass (google.com: domain of ruby-ffi+bncCMPYuayYERDcxJH1BBoEm08qZA@googlegroups.com designates 209.85.210.62 as permitted sender) client-ip=209.85.210.62;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of ruby-ffi+bncCMPYuayYERDcxJH1BBoEm08qZA@googlegroups.com designates 209.85.210.62 as permitted sender) smtp.mail=ruby-ffi+bncCMPYuayYERDcxJH1BBoEm08qZA@googlegroups.com; dkim=pass (test mode) header.i=@googlegroups.com
Received: by pzk37 with SMTP id 37sf5956180pzk.7
        for <headius@headius.com>; Sun, 23 Oct 2011 11:52:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlegroups.com; s=beta;
        h=x-beenthere:received-spf:date:from:to:message-id:in-reply-to
         :references:subject:x-mailer:mime-version:x-original-sender
         :x-original-authentication-results:reply-to:precedence:mailing-list
         :list-id:x-google-group-id:list-post:list-help:list-archive:sender
         :list-subscribe:list-unsubscribe:content-type
         :content-transfer-encoding:content-disposition;
        bh=+UGaTFTlxXKonG3qnXSb5PxzBHvf2JWptXynvGkkSHE=;
        b=YAtF9eJaD+L6Gt3OpKNQal2fqGGMalUa4zbkxaNFjFKpLGRiXUQD9jeIkK5tOEcpBD
         DFLJwAJbUdCX0ENOZWGUE+bLK+2keqkV/z3OgHDsFaxZLjsHI4jDMxULKSX14KbKJ8KQ
         NrEVhviyqM7wtZg1cDcJ6crAcj9opeGWkVxSY=
Received: by 10.68.157.133 with SMTP id wm5mr4156228pbb.10.1319395932543;
        Sun, 23 Oct 2011 11:52:12 -0700 (PDT)
X-BeenThere: ruby-ffi@googlegroups.com
Received: by 10.68.42.97 with SMTP id n1ls17881236pbl.2.gmail; Sun, 23 Oct
 2011 11:52:12 -0700 (PDT)
Received: by 10.68.8.135 with SMTP id r7mr24298850pba.8.1319395932268;
        Sun, 23 Oct 2011 11:52:12 -0700 (PDT)
Received: by 10.68.8.135 with SMTP id r7mr24298849pba.8.1319395932257;
        Sun, 23 Oct 2011 11:52:12 -0700 (PDT)
Received: from mail-pz0-f48.google.com (mail-pz0-f48.google.com [209.85.210.48])
        by gmr-mx.google.com with ESMTPS id l5si4297354pbe.2.2011.10.23.11.52.12
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 23 Oct 2011 11:52:12 -0700 (PDT)
Received-SPF: pass (google.com: domain of jvoorhis@gmail.com designates 209.85.210.48 as permitted sender) client-ip=209.85.210.48;
Received: by pzk37 with SMTP id 37so16182406pzk.7
        for <ruby-ffi@googlegroups.com>; Sun, 23 Oct 2011 11:52:12 -0700 (PDT)
Received: by 10.68.36.103 with SMTP id p7mr42608704pbj.74.1319395932002;
        Sun, 23 Oct 2011 11:52:12 -0700 (PDT)
Received: from jvoorhis.local (97-120-76-224.ptld.qwest.net. [97.120.76.224])
        by mx.google.com with ESMTPS id ml4sm58307216pbc.0.2011.10.23.11.52.08
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 23 Oct 2011 11:52:10 -0700 (PDT)
Date: Sun, 23 Oct 2011 11:52:10 -0700
From: Jeremy Voorhis <jvoorhis@gmail.com>
To: ruby-ffi@googlegroups.com
Message-ID: <E5E92CB0B26C422FAB6760E66BC6E914@gmail.com>
In-Reply-To: <08749d02-510a-41e6-8c44-f669940ffc20@fk25g2000vbb.googlegroups.com>
References: <08749d02-510a-41e6-8c44-f669940ffc20@fk25g2000vbb.googlegroups.com>
Subject: Re: [ruby-ffi] distributing c with gem
X-Mailer: sparrow 1.4 (build 904)
MIME-Version: 1.0
X-Original-Sender: jvoorhis@gmail.com
X-Original-Authentication-Results: gmr-mx.google.com; spf=pass (google.com:
 domain of jvoorhis@gmail.com designates 209.85.210.48 as permitted sender)
 smtp.mail=jvoorhis@gmail.com; dkim=pass (test mode) header.i=@gmail.com
Reply-To: ruby-ffi@googlegroups.com
Precedence: list
Mailing-list: list ruby-ffi@googlegroups.com; contact ruby-ffi+owners@googlegroups.com
List-ID: <ruby-ffi.googlegroups.com>
X-Google-Group-Id: 238405446264
List-Post: <http://groups.google.com/group/ruby-ffi/post?hl=en_US>, <mailto:ruby-ffi@googlegroups.com>
List-Help: <http://groups.google.com/support/?hl=en_US>, <mailto:ruby-ffi+help@googlegroups.com>
List-Archive: <http://groups.google.com/group/ruby-ffi?hl=en_US>
Sender: ruby-ffi@googlegroups.com
List-Subscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=en_US>, <mailto:ruby-ffi+subscribe@googlegroups.com>
List-Unsubscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=en_US>,
 <mailto:ruby-ffi+unsubscribe@googlegroups.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 I've tried to crack this one as well. After learning that RubyGems will build extensions using configure-make-install in addition to extconf.rb, I have a branch of ruby-llvm that uses the autotools to build and manage a shared library, but unfortunately haven't released it yet because of incompatibilities between autoconf versions on Mac and Ubuntu. 

You can see my approach at https://github.com/jvoorhis/ruby-llvm/tree/support-lib. If anyone is an autotools pro, or has a better idea, please help! :)

Jeremy 


On Sunday, October 23, 2011 at 2:49 AM, mixtli wrote:

>  I want to package up my c source with my gem, and call it from ffi.
> How can I tell ffi to use a library packaged with the gem instead of
> looking in the system libraries?


