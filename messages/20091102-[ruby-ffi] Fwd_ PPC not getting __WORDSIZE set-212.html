<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>[ruby-ffi] Fwd: PPC not getting __WORDSIZE set</title>
<link rel="important stylesheet" href="">
<style>div.headerdisplayname {font-weight:bold;}</style></head>
<body>
<table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part1"><tr><td><div class="headerdisplayname" style="display:inline;">Subject: </div>[ruby-ffi] Fwd: PPC not getting __WORDSIZE set</td></tr><tr><td><div class="headerdisplayname" style="display:inline;">From: </div>Bryan Kearney <bkearney@redhat.com></td></tr><tr><td><div class="headerdisplayname" style="display:inline;">Date: </div>11/2/09 6:28 PM</td></tr></table><table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part2"><tr><td><div class="headerdisplayname" style="display:inline;">To: </div>ruby-ffi@googlegroups.com</td></tr></table><br>
<div class="moz-text-flowed" style="font-family: -moz-fixed; font-size: 12px;" lang="x-western">
<br>So.. I am not a strong C guy. If you check this message, it appears that 
__WORDSIZE is not being set correctly for ppc64. If I look at 
ffi/ext/ffi_c/libffi/configure I see:
<br>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ppc64-<b class="moz-txt-star"><span class="moz-txt-tag">*</span>linux<span class="moz-txt-tag">*</span></b>|powerpc64-<b class="moz-txt-star"><span class="moz-txt-tag">*</span>linux<span class="moz-txt-tag">*</span></b>)
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LD="${LD-ld} -m elf32ppclinux"
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;;
<br>
<br>
<br>Is this correct? Should it be calling 32 bit libraries
<br>
<br>-- bk
<br>
<br>-------- Original Message --------
<br>Subject: PPC not getting __WORDSIZE set
<br>Date: Mon, 02 Nov 2009 17:15:50 -0500
<br>From: Bryan Kearney <a class="moz-txt-link-rfc2396E" href="mailto:bkearney@redhat.com">&lt;bkearney@redhat.com&gt;</a>
<br>Reply-To: Development discussions related to Fedora 
<a class="moz-txt-link-rfc2396E" href="mailto:fedora-devel-list@redhat.com">&lt;fedora-devel-list@redhat.com&gt;</a>
<br>To: Development discussions related to Fedora <a class="moz-txt-link-rfc2396E" href="mailto:fedora-devel-list@redhat.com">&lt;fedora-devel-list@redhat.com&gt;</a>
<br>
<br>Word of warning.. I am no too familiar with C across platforms.&nbsp; I am
<br>trying to package ruby-ffi (spec file is at [1]) and when I do a scratch
<br>build in Koji [2] it runs fine on x86 but is failing in ppc_64. It
<br>appears that __WORDSIZE is not being set [3]. I looked at the CFLags for
<br>the x86_64 and they are the same, so I assumed things would run fine.
<br>Can anyone point me at what to look at next?
<br>
<br>-- bk
<br>
<br>[1] Spec file: <a class="moz-txt-link-freetext" href="http://bkearney.fedorapeople.org/ruby-ffi.spec">http://bkearney.fedorapeople.org/ruby-ffi.spec</a>
<br>[2] Main Build: <a class="moz-txt-link-freetext" href="http://koji.fedoraproject.org/koji/taskinfo?taskID=1783879">http://koji.fedoraproject.org/koji/taskinfo?taskID=1783879</a>
<br>[3] Failing Build Log:
<br><a class="moz-txt-link-freetext" href="http://koji.fedoraproject.org/koji/getfile?taskID=1783882&amp;name=build.log">http://koji.fedoraproject.org/koji/getfile?taskID=1783882&amp;name=build.log</a>
<br>[4] SRPM: <a class="moz-txt-link-freetext" href="http://bkearney.fedorapeople.org/ruby-ffi-0.5.1-1.fc11.src.rpm">http://bkearney.fedorapeople.org/ruby-ffi-0.5.1-1.fc11.src.rpm</a>
<br>
<br><div class="moz-txt-sig"><span class="moz-txt-tag">--&nbsp;<br></span>fedora-devel-list mailing list
<br><a class="moz-txt-link-abbreviated" href="mailto:fedora-devel-list@redhat.com">fedora-devel-list@redhat.com</a>
<br><a class="moz-txt-link-freetext" href="https://www.redhat.com/mailman/listinfo/fedora-devel-list">https://www.redhat.com/mailman/listinfo/fedora-devel-list</a>
<br></div></div></body>
</html>
</table></div>