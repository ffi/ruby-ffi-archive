Delivered-To: headius@headius.com
Received: by 10.224.67.198 with SMTP id s6cs253069qai;
        Mon, 14 Sep 2009 01:31:19 -0700 (PDT)
Received: by 10.114.104.13 with SMTP id b13mr10807942wac.184.1252917078526;
        Mon, 14 Sep 2009 01:31:18 -0700 (PDT)
Return-Path: <grbounce-oS_-awUAAACicsVXPUFstTOYQmrUJNfw=headius=headius.com@googlegroups.com>
Received: from mail-px0-f159.google.com (mail-px0-f159.google.com [209.85.216.159])
        by mx.google.com with ESMTP id 38si27353959pzk.93.2009.09.14.01.31.16;
        Mon, 14 Sep 2009 01:31:17 -0700 (PDT)
Received-SPF: pass (google.com: domain of grbounce-oS_-awUAAACicsVXPUFstTOYQmrUJNfw=headius=headius.com@googlegroups.com designates 209.85.216.159 as permitted sender) client-ip=209.85.216.159;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of grbounce-oS_-awUAAACicsVXPUFstTOYQmrUJNfw=headius=headius.com@googlegroups.com designates 209.85.216.159 as permitted sender) smtp.mail=grbounce-oS_-awUAAACicsVXPUFstTOYQmrUJNfw=headius=headius.com@googlegroups.com; dkim=pass (test mode) header.i=@googlegroups.com
Received: by pxi31 with SMTP id 31so1654471pxi.27
        for <headius@headius.com>; Mon, 14 Sep 2009 01:31:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlegroups.com; s=beta;
        h=domainkey-signature:received:received:x-sender:x-apparently-to
         :received:received:received:received-spf:received:dkim-signature
         :domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:reply-to:sender:precedence:x-google-loop
         :mailing-list:list-id:list-post:list-help:list-unsubscribe
         :x-beenthere-env:x-beenthere;
        bh=X/Ue4WKD45a+R6M8CQhkehsCeYzFvJlNzSVqkLkBO7o=;
        b=OaHj6uLPKOyz29yv4qFs4Cf5YPHAc4Xb1PuL8t/oAHmG7MvaNJyr2Y7IEAxNgxYSJM
         +c4R0z8bWfMHiwepYE+3TOHJZlhsnqnspuCRiwewXan+6gQF2bi2SFL99PK1HFwd2vxJ
         8UYDviURfIyGkU5kn7QsUhbEdecUx6RIF9uNo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlegroups.com; s=beta;
        h=x-sender:x-apparently-to:received-spf:authentication-results
         :dkim-signature:domainkey-signature:mime-version:date:message-id
         :subject:from:to:content-type:reply-to:sender:precedence
         :x-google-loop:mailing-list:list-id:list-post:list-help
         :list-unsubscribe:x-beenthere-env:x-beenthere;
        b=bEBe8HljGX8xdUaf3tU0V6XKaf8KCxjmxoIOolIidio/ZKoOJQItn0k3iiRnBilwBK
         Lwq2bvdVj0vNsyPpubrri/Fyd23y3M4J4ymIb708cKG6aJ0VxdhCYySuJkHQ9Zahcp7/
         /uQUo2Q/M3worRRrMrr75zyaOvGbKqbUjOCdE=
Received: by 10.115.132.15 with SMTP id j15mr588528wan.22.1252917075513;
        Mon, 14 Sep 2009 01:31:15 -0700 (PDT)
Received: by 10.106.252.29 with SMTP id z29gr16prh.0;
	Mon, 14 Sep 2009 01:31:15 -0700 (PDT)
X-Sender: wmeissner@gmail.com
X-Apparently-To: ruby-ffi@googlegroups.com
Received: by 10.141.15.11 with SMTP id s11mr2854774rvi.27.1252917074636; Mon, 14 Sep 2009 01:31:14 -0700 (PDT)
Received: by 10.141.15.11 with SMTP id s11mr2854772rvi.27.1252917074615; Mon, 14 Sep 2009 01:31:14 -0700 (PDT)
Return-Path: <wmeissner@gmail.com>
Received: from mail-pz0-f201.google.com (mail-pz0-f201.google.com [209.85.222.201]) by gmr-mx.google.com with ESMTP id 25si1540188pzk.7.2009.09.14.01.31.13; Mon, 14 Sep 2009 01:31:13 -0700 (PDT)
Received-SPF: pass (google.com: domain of wmeissner@gmail.com designates 209.85.222.201 as permitted sender) client-ip=209.85.222.201;
Received: by pzk39 with SMTP id 39so2401260pzk.15 for <ruby-ffi@googlegroups.com>; Mon, 14 Sep 2009 01:31:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=gamma; h=domainkey-signature:mime-version:received:date:message-id:subject :from:to:content-type; bh=5XwrQbQhmzeKlTVDbH+Aj8uxxWiwYO6ocW50ECAuW50=; b=svXoUXi1wgLZfEoxYozfWbIlPh5eWLz6rIHPipbdGbyX/yCn8OlGJ5lzgwatMC9Nb5 3fB+dQvgx3Y/sR51MrCCST1yZfBo9dU52a460bY0SkJhdN9ESWObBiWQfYi0lkohMzyA zGRwayd3C3Rf/HDYuvrWQnFhKU7ggOOIVNUbM=
DomainKey-Signature: a=rsa-sha1; c=nofws; d=gmail.com; s=gamma; h=mime-version:date:message-id:subject:from:to:content-type; b=fakDArlmN3UGJQAATsq60bF+eXkCQrcvJYUsunT0TocGrUHAvgMMmL1Z0FYUzC1Upm eeI72LealQC4k8cgNJotEgeXkLgzfzGpNWNzwzCgZoto9mQOqwGAM9vCySOfcbqNo/HR 8FkGvny09x4iHEaYLH2L/cEq5sNERfYaBfJj8=
MIME-Version: 1.0
Received: by 10.141.13.13 with SMTP id q13mr893631rvi.40.1252917073550; Mon,  14 Sep 2009 01:31:13 -0700 (PDT)
Date: Mon, 14 Sep 2009 18:31:13 +1000
Message-ID: <4ccee320909140131v7d6cccbfs3f974d36adaad56c@mail.gmail.com>
Subject: [ruby-ffi] Snow Leopard + ruby-ffi
From: Wayne Meissner <wmeissner@gmail.com>
To: ruby-ffi@googlegroups.com
Content-Type: text/plain; charset=ISO-8859-1
Reply-To: ruby-ffi@googlegroups.com
Sender: ruby-ffi@googlegroups.com
Precedence: bulk
X-Google-Loop: groups
Mailing-List: list ruby-ffi@googlegroups.com;
	contact ruby-ffi+owner@googlegroups.com
List-Id: <ruby-ffi.googlegroups.com>
List-Post: <mailto:ruby-ffi@googlegroups.com>
List-Help: <mailto:ruby-ffi+help@googlegroups.com>
List-Unsubscribe: <http://googlegroups.com/group/ruby-ffi/subscribe>,
	<mailto:ruby-ffi+unsubscribe@googlegroups.com>
X-BeenThere-Env: ruby-ffi@googlegroups.com
X-BeenThere: ruby-ffi@googlegroups.com


ruby-ffi is somewhat broken w.r.t closures/callbacks on snow leopard,
due to the NX bit being enabled on heap allocations now, and a
mis-configuration when building the internal libffi - the code to
properly allocate closures as read+execute was not being compiled in.

To add to the fun, if you build libffi out of macports, it also does
not enable that code, and ruby-ffi will find that version and try to
use it, and fail miserably.

So if you need FFI on 10.6, install 0.5.0 from source.
