Delivered-To: headius@headius.com
Received: by 10.100.134.8 with SMTP id h8cs585105and;
        Tue, 22 Dec 2009 11:56:51 -0800 (PST)
Received: by 10.141.90.9 with SMTP id s9mr1521168rvl.126.1261511809917;
        Tue, 22 Dec 2009 11:56:49 -0800 (PST)
Return-Path: <3fyQxSwkJCCASIAEOOJANCI6EH.8KINQ7U-BBECKKCHACNKQLO.8KI@listserv.bounces.google.com>
Received: from mail-pw0-f68.google.com (mail-pw0-f68.google.com [209.85.160.68])
        by mx.google.com with ESMTP id 11si581481pwj.21.2009.12.22.11.56.48;
        Tue, 22 Dec 2009 11:56:48 -0800 (PST)
Received-SPF: pass (google.com: domain of 3fyQxSwkJCCASIAEOOJANCI6EH.8KINQ7U-BBECKKCHACNKQLO.8KI@listserv.bounces.google.com designates 209.85.160.68 as permitted sender) client-ip=209.85.160.68;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of 3fyQxSwkJCCASIAEOOJANCI6EH.8KINQ7U-BBECKKCHACNKQLO.8KI@listserv.bounces.google.com designates 209.85.160.68 as permitted sender) smtp.mail=3fyQxSwkJCCASIAEOOJANCI6EH.8KINQ7U-BBECKKCHACNKQLO.8KI@listserv.bounces.google.com; dkim=pass (test mode) header.i=@googlegroups.com
Received: by pwj20 with SMTP id 20sf2802086pwj.27
        for <headius@headius.com>; Tue, 22 Dec 2009 11:56:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlegroups.com; s=beta;
        h=domainkey-signature:received:x-beenthere:received:received:received
         :received:received-spf:received:mime-version:received:in-reply-to
         :references:date:message-id:subject:from:to
         :x-original-authentication-results:x-original-sender:reply-to
         :precedence:mailing-list:list-id:list-post:list-help:list-archive
         :x-thread-url:x-message-url:sender:list-unsubscribe:list-subscribe
         :content-type:content-transfer-encoding;
        bh=Zbld7JJJoPOCVgWGGkAAYKIXwMLScT0y+knhllE5erA=;
        b=UwNmw/yAgzIPoiKoZGdySYpg7J+GfmOa+QExPTvlOv1SXS8WjKi7Ezb/Q880spGZk3
         JYmLjt/xLDGL825L9mtRnJ/p6QJApRjC34NUaojjXMOcFEHk3NL1jKp6VkedAZ6ao4XD
         xgtXNM98BZYyiUNoEbeTMuj56Lh22UoI/FUhI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlegroups.com; s=beta;
        h=x-beenthere:received-spf:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:x-original-authentication-results
         :x-original-sender:reply-to:precedence:mailing-list:list-id
         :list-post:list-help:list-archive:x-thread-url:x-message-url:sender
         :list-unsubscribe:list-subscribe:content-type
         :content-transfer-encoding;
        b=V8EUBJkM4MulLNR/zC0SJHaU2s8pAZdyu3x8gMFGfe/b/RHbvd+Ybu9f/QvPeflXrz
         9hH52Bcu7VMyIeFUIRxn9iq6RmIDuuJkl6ckRtOZfpBFK1yJcOJxtWSkVgyOriEZFphC
         PRbOG8+J6FRNwcRoi742eogzHzth5saoSR7t8=
Received: by 10.142.8.24 with SMTP id 24mr782052wfh.38.1261511807170;
        Tue, 22 Dec 2009 11:56:47 -0800 (PST)
X-BeenThere: ruby-ffi@googlegroups.com
Received: by 10.143.21.11 with SMTP id y11ls37983wfi.1.p; Tue, 22 Dec 2009 
	11:56:45 -0800 (PST)
Received: by 10.142.74.13 with SMTP id w13mr1806217wfa.15.1261511805148;
        Tue, 22 Dec 2009 11:56:45 -0800 (PST)
Received: by 10.142.74.13 with SMTP id w13mr1806216wfa.15.1261511805129;
        Tue, 22 Dec 2009 11:56:45 -0800 (PST)
Return-Path: <wmeissner@gmail.com>
Received: from mail-pw0-f51.google.com (mail-pw0-f51.google.com [209.85.160.51])
        by gmr-mx.google.com with ESMTP id 18si1724670pzk.9.2009.12.22.11.56.44;
        Tue, 22 Dec 2009 11:56:44 -0800 (PST)
Received-SPF: pass (google.com: domain of wmeissner@gmail.com designates 209.85.160.51 as permitted sender) client-ip=209.85.160.51;
Received: by pwj15 with SMTP id 15so4113609pwj.10
        for <ruby-ffi@googlegroups.com>; Tue, 22 Dec 2009 11:56:44 -0800 (PST)
MIME-Version: 1.0
Received: by 10.141.91.9 with SMTP id t9mr1972132rvl.127.1261511800647; Tue, 
	22 Dec 2009 11:56:40 -0800 (PST)
In-Reply-To: <20091222092526.e153a68d.jon.forums@gmail.com>
References: <20091221152637.62654e37.jon.forums@gmail.com>
	 <4ccee320912211400t18af822coe605c5353cea0950@mail.gmail.com>
	 <4ccee320912211521r47522a8q1905e1da000cab07@mail.gmail.com>
	 <4c8621ca-bd47-4e6b-98ef-10507e52f54a@t42g2000yqd.googlegroups.com>
	 <4ccee320912211547u3714d68djba2f188af6969532@mail.gmail.com>
	 <20091222092526.e153a68d.jon.forums@gmail.com>
Date: Wed, 23 Dec 2009 05:56:40 +1000
Message-ID: <4ccee320912221156p6ed3c0eam4363e3a38f22acf@mail.gmail.com>
Subject: Re: [ruby-ffi] Re: Struct/ManagedStruct and GC behaviour
From: Wayne Meissner <wmeissner@gmail.com>
To: ruby-ffi@googlegroups.com
X-Original-Authentication-Results: gmr-mx.google.com; spf=pass (google.com: 
	domain of wmeissner@gmail.com designates 209.85.160.51 as permitted sender) 
	smtp.mail=wmeissner@gmail.com; dkim=pass (test mode) header.i=@gmail.com
X-Original-Sender: wmeissner@gmail.com
Reply-To: ruby-ffi@googlegroups.com
Precedence: list
Mailing-list: list ruby-ffi@googlegroups.com; contact ruby-ffi+owners@googlegroups.com
List-ID: <ruby-ffi.googlegroups.com>
List-Post: <http://groups.google.com/group/ruby-ffi/post?hl=>, 
	<mailto:ruby-ffi@googlegroups.com>
List-Help: <http://groups.google.com/support/?hl=>, <mailto:ruby-ffi+help@googlegroups.com>
List-Archive: <http://groups.google.com/group/ruby-ffi?hl=>
X-Thread-Url: http://groups.google.com/group/ruby-ffi/t/509f727c52cb337
X-Message-Url: http://groups.google.com/group/ruby-ffi/msg/f79b001dd3fe73fb
Sender: ruby-ffi@googlegroups.com
List-Unsubscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=>, 
	<mailto:ruby-ffi+unsubscribe@googlegroups.com>
List-Subscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=>, 
	<mailto:ruby-ffi+subscribe@googlegroups.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2009/12/23 Jon <jon.forums@gmail.com>:
>> http://kenai.com/projects/jruby/sources/main/content/lib/ruby/1.8/Win32A=
PI.rb?rev=3D498a8743a12ed64e3fa6f994318caf62dfa73aa5
>
> Very nice. =A0Ah, another thing to add to the old to-look-at list ;)
>
> Should line 2 match for mingw in addition to mswin?

If you want it to be portable, then yes.  On JRuby, windows is always
mswin.  That implementation uses a couple of JRuby internals - like
FFI::Type::WIN32PTR (to allow int values as :pointer arguments), and
loading ffi-internal.so instead of the more generic 'ffi' (shaves
about 50ms off startup).
