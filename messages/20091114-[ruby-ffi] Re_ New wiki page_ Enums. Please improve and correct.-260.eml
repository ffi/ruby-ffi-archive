Delivered-To: headius@headius.com
Received: by 10.142.217.20 with SMTP id p20cs63714wfg;
        Sat, 14 Nov 2009 01:30:38 -0800 (PST)
Received: by 10.150.3.31 with SMTP id 31mr9594259ybc.313.1258191037957;
        Sat, 14 Nov 2009 01:30:37 -0800 (PST)
Return-Path: <grbounce-oS_-awUAAACicsVXPUFstTOYQmrUJNfw=headius=headius.com@googlegroups.com>
Received: from mail-yw0-f154.google.com (mail-yw0-f154.google.com [209.85.211.154])
        by mx.google.com with ESMTP id 20si13727742gxk.35.2009.11.14.01.30.36;
        Sat, 14 Nov 2009 01:30:36 -0800 (PST)
Received-SPF: pass (google.com: domain of grbounce-oS_-awUAAACicsVXPUFstTOYQmrUJNfw=headius=headius.com@googlegroups.com designates 209.85.211.154 as permitted sender) client-ip=209.85.211.154;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of grbounce-oS_-awUAAACicsVXPUFstTOYQmrUJNfw=headius=headius.com@googlegroups.com designates 209.85.211.154 as permitted sender) smtp.mail=grbounce-oS_-awUAAACicsVXPUFstTOYQmrUJNfw=headius=headius.com@googlegroups.com; dkim=pass (test mode) header.i=@googlegroups.com
Received: by ywh26 with SMTP id 26so5766148ywh.13
        for <headius@headius.com>; Sat, 14 Nov 2009 01:30:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlegroups.com; s=beta;
        h=domainkey-signature:received:received:x-sender:x-apparently-to
         :received:received:received:received-spf:received:dkim-signature
         :domainkey-signature:mime-version:received:in-reply-to:references
         :from:date:message-id:subject:to:content-type
         :content-transfer-encoding:reply-to:sender:precedence:x-google-loop
         :mailing-list:list-id:list-post:list-help:list-unsubscribe
         :x-beenthere-env:x-beenthere;
        bh=9+E8pHJr8ud5LwSlgpsc+m4ojmRnUE2bN+ylxb0c2Bw=;
        b=VG+zxH35UZE+zBcmKv7ru+BRJAeUJsiFYwMMImc10UxDTsZs9C0F97c4sByotZZ8Of
         g565g6HkofUEwSGprs8WIu11zfWS/Xi28LYiCsXeXtvFZBGwQRMvv7bqHmOpwhZRZUOD
         +KZE6SJh47ItD0cg1WrW1CfRYWTvWSEBP5xUM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlegroups.com; s=beta;
        h=x-sender:x-apparently-to:received-spf:authentication-results
         :dkim-signature:domainkey-signature:mime-version:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding:reply-to:sender:precedence:x-google-loop
         :mailing-list:list-id:list-post:list-help:list-unsubscribe
         :x-beenthere-env:x-beenthere;
        b=Kx/gzAYAZ2wkAwBuBnhjXLP2SY8D/Xo4c/3dVKzd3YHvg5XmKmAAW2sa+mXN7E9JXT
         MhQnp5s/LOsI1CehkklyUPyoom4XUTIrh2lwlGDXzkJjLDf/1QxydbUQXV+jdRDhutI3
         LcaQ09WDe4Mesnb8Oa/wjUCMD5zXTUllnuou4=
Received: by 10.150.17.1 with SMTP id 1mr96875ybq.14.1258191034768;
        Sat, 14 Nov 2009 01:30:34 -0800 (PST)
Received: by 10.176.181.37 with SMTP id d37gr115yqf.0;
	Sat, 14 Nov 2009 01:30:34 -0800 (PST)
X-Sender: jacius@gmail.com
X-Apparently-To: ruby-ffi@googlegroups.com
Received: by 10.91.72.12 with SMTP id z12mr6584620agk.1.1258191034280; Sat, 14 Nov 2009 01:30:34 -0800 (PST)
Received: by 10.91.72.12 with SMTP id z12mr6584619agk.1.1258191034249; Sat, 14 Nov 2009 01:30:34 -0800 (PST)
Return-Path: <jacius@gmail.com>
Received: from mail-yw0-f178.google.com (mail-yw0-f178.google.com [209.85.211.178]) by gmr-mx.google.com with ESMTP id 17si594688gxk.12.2009.11.14.01.30.33; Sat, 14 Nov 2009 01:30:33 -0800 (PST)
Received-SPF: pass (google.com: domain of jacius@gmail.com designates 209.85.211.178 as permitted sender) client-ip=209.85.211.178;
Received: by ywh8 with SMTP id 8so3726446ywh.3 for <ruby-ffi@googlegroups.com>; Sat, 14 Nov 2009 01:30:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=gamma; h=domainkey-signature:mime-version:received:in-reply-to:references :from:date:message-id:subject:to:content-type :content-transfer-encoding; bh=5hgQLDALrotbMG3LlTh5ThIaFBPCySll+z16CkkBON8=; b=hVmYOav6W9vmlv3m4QDnvS5Nyfv9KCOe1jmmcjxifr4bRp5d7Mk4+IXg4BNPP8nhbz xNwj1d19Q7iJ2WohgU2+zMHoFtB7HZJAHWOmZjlCoJbOZzoqZ4bJFQUKF8zmFzwGU4A/ bwumjjAzJsTxmti4RRcwcW8UOhesBGYOZKEQ0=
DomainKey-Signature: a=rsa-sha1; c=nofws; d=gmail.com; s=gamma; h=mime-version:in-reply-to:references:from:date:message-id:subject:to :content-type:content-transfer-encoding; b=QEZuixU4RpxaCkT5FJmA5nLxnlgVMLzCZIrXpUBdXXlJYvjaoPewJBQ+goyGnnJdel 6mO81tfaKpq+Eisu6WtcjpZgYAtnBNinHwnBjfhKZ9SZAeLV1ULc3URhGgzC7zzouKND 5T8F6gEe6lQBkYqf21LgSJnA0VDTrK7FtTyeU=
MIME-Version: 1.0
Received: by 10.90.42.39 with SMTP id p39mr1214120agp.86.1258191033109; Sat,  14 Nov 2009 01:30:33 -0800 (PST)
In-Reply-To: <4ccee320911132053k2dc05322tfedde4d3144193bb@mail.gmail.com>
References: <bf2f536c0911131859h3f15b1a0k2a6aad45ab323bfe@mail.gmail.com>  <4ccee320911132053k2dc05322tfedde4d3144193bb@mail.gmail.com>
From: John Croisant <jacius@gmail.com>
Date: Sat, 14 Nov 2009 03:30:13 -0600
Message-ID: <bf2f536c0911140130i1654d8a6ve8db4ca6a414cd7a@mail.gmail.com>
Subject: [ruby-ffi] Re: New wiki page: Enums. Please improve and correct.
To: ruby-ffi@googlegroups.com
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
Reply-To: ruby-ffi@googlegroups.com
Sender: ruby-ffi@googlegroups.com
Precedence: bulk
X-Google-Loop: groups
Mailing-List: list ruby-ffi@googlegroups.com;
	contact ruby-ffi+owner@googlegroups.com
List-Id: <ruby-ffi.googlegroups.com>
List-Post: <mailto:ruby-ffi@googlegroups.com>
List-Help: <mailto:ruby-ffi+help@googlegroups.com>
List-Unsubscribe: <http://googlegroups.com/group/ruby-ffi/subscribe>,
	<mailto:ruby-ffi+unsubscribe@googlegroups.com>
X-BeenThere-Env: ruby-ffi@googlegroups.com
X-BeenThere: ruby-ffi@googlegroups.com


On Fri, Nov 13, 2009 at 10:53 PM, Wayne Meissner <wmeissner@gmail.com> wrot=
e:
> I wouldn't call the first example (using constants), "BAD EXAMPLE",
> since its still a valid way to do integer constants. =C2=A0Its just not a=
s
> nice as the enum way.

Sure. Hopefully the advantages of the enum way will be clear enough
that it's not really necessary to discourage the use of integer
constants.

> 2) Assign the new Enum type to a constant
> =C2=A0MyEnum =3D enum(:a, :b, :c)
>
> [snip]
>
> The second form however, is needed if you intend to use an enum as a
> Struct field type, for the same reason you need to do that for e.g.
> callbacks. =C2=A0i.e. lexical scoping rules.

Okay, I've updated the page to mention the other forms.

But, I thought you could use the enum name as a type, even in structs.
I haven't tried it yet, but it certainly feels like that _should_ be
supported, from a library user's perspective. Even if that doesn't
work yet, "enum_type(:my_enum)" would work, right?

Or were you just showing how to use an _unnamed_ enum in a struct?

- John

P.S. Does FFI enforce the validity of values used where a particular
enum type is expected? In other words, if a function (or struct) is
expecting an enum that can be only :a, :b, or :c, would passing :d
cause it to raise an error?
