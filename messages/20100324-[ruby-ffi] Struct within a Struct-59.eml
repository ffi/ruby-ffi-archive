Delivered-To: headius@headius.com
Received: by 10.150.225.19 with SMTP id x19cs218029ybg;
        Wed, 24 Mar 2010 00:05:30 -0700 (PDT)
Received: by 10.101.108.6 with SMTP id k6mr2271803anm.162.1269414330124;
        Wed, 24 Mar 2010 00:05:30 -0700 (PDT)
Return-Path: <3t7mpSwcJCGYGSPFcKOKQEMP.GSQVYFc-JJMKSSKPIKVSYTW.GSQ@groups.bounces.google.com>
Received: from mail-gw0-f62.google.com (mail-gw0-f62.google.com [74.125.83.62])
        by mx.google.com with ESMTP id 9si12978607gxk.61.2010.03.24.00.05.28;
        Wed, 24 Mar 2010 00:05:29 -0700 (PDT)
Received-SPF: pass (google.com: domain of 3t7mpSwcJCGYGSPFcKOKQEMP.GSQVYFc-JJMKSSKPIKVSYTW.GSQ@groups.bounces.google.com designates 74.125.83.62 as permitted sender) client-ip=74.125.83.62;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of 3t7mpSwcJCGYGSPFcKOKQEMP.GSQVYFc-JJMKSSKPIKVSYTW.GSQ@groups.bounces.google.com designates 74.125.83.62 as permitted sender) smtp.mail=3t7mpSwcJCGYGSPFcKOKQEMP.GSQVYFc-JJMKSSKPIKVSYTW.GSQ@groups.bounces.google.com; dkim=pass (test mode) header.i=@googlegroups.com
Received: by gwj15 with SMTP id 15sf12796519gwj.7
        for <headius@headius.com>; Wed, 24 Mar 2010 00:05:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlegroups.com; s=beta;
        h=domainkey-signature:received:x-beenthere:received:received:received
         :received:received:received-spf:received:mime-version:received:date
         :x-ip:user-agent:x-http-useragent:message-id:subject:from:to
         :x-original-authentication-results:x-original-sender:reply-to
         :precedence:mailing-list:list-id:list-post:list-help:list-archive
         :x-thread-url:x-message-url:sender:list-subscribe:list-unsubscribe
         :content-type;
        bh=uV+ifMZSkbB908qsbRExhZ4MbDhfkPVUOql2F/IwF/8=;
        b=jEodrTdMEUuhHv6xcfEcy1w/aNA5oY/Q1bGh1Ig46eZ3VznsFLN/vJrOcNQbnmv3db
         7sgswdWEMr3RsFTOWKxvp6sNK9WPXUEzf2Rxgh28Zi9EEcl9mk2mP2Floam3qFroiTbW
         41CklvjZijVjzIq3rdYM85MUpa9eHMUDGhG2k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlegroups.com; s=beta;
        h=x-beenthere:received-spf:mime-version:date:x-ip:user-agent
         :x-http-useragent:message-id:subject:from:to
         :x-original-authentication-results:x-original-sender:reply-to
         :precedence:mailing-list:list-id:list-post:list-help:list-archive
         :x-thread-url:x-message-url:sender:list-subscribe:list-unsubscribe
         :content-type;
        b=FO4atzmsDPHPIUuG3AcNQlxd7p6CaVSROn/CNvxw+6yJyewird587aRgtVWTZRN/3F
         t2hWn5cF/V4n438iqCotgbCQ/uktkZ0ntUAWLupFbf2EIoBDAL25/k3nJVfNxzzdgAgK
         1kGGOQvTgoe9LD5UrMM2cQgTOfYLeZbvtOAv0=
Received: by 10.151.115.16 with SMTP id s16mr97246ybm.8.1269414327112;
        Wed, 24 Mar 2010 00:05:27 -0700 (PDT)
X-BeenThere: ruby-ffi@googlegroups.com
Received: by 10.150.129.7 with SMTP id b7ls344159ybd.2.p; Wed, 24 Mar 2010 
	00:05:26 -0700 (PDT)
Received: by 10.150.131.3 with SMTP id e3mr766736ybd.8.1269414326472;
        Wed, 24 Mar 2010 00:05:26 -0700 (PDT)
Received: by 10.151.130.15 with SMTP id h15mr1109141ybn.1.1269408699629;
        Tue, 23 Mar 2010 22:31:39 -0700 (PDT)
Received: by 10.151.130.15 with SMTP id h15mr1109139ybn.1.1269408699585;
        Tue, 23 Mar 2010 22:31:39 -0700 (PDT)
Return-Path: <colbygk@gmail.com>
Received: from mail-gy0-f190.google.com (mail-gy0-f190.google.com [209.85.160.190])
        by gmr-mx.google.com with ESMTP id 18si721467gxk.7.2010.03.23.22.31.39;
        Tue, 23 Mar 2010 22:31:39 -0700 (PDT)
Received-SPF: pass (google.com: domain of colbygk@gmail.com designates 209.85.160.190 as permitted sender) client-ip=209.85.160.190;
Received: by mail-gy0-f190.google.com with SMTP id 15so10654125gyc.27
        for <ruby-ffi@googlegroups.com>; Tue, 23 Mar 2010 22:31:39 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.101.151.19 with SMTP id d19mr343578ano.76.1269408699549; Tue, 
	23 Mar 2010 22:31:39 -0700 (PDT)
Date: Tue, 23 Mar 2010 22:31:39 -0700 (PDT)
X-IP: 70.100.31.22
User-Agent: G2/1.0
X-HTTP-UserAgent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_5_8; en-us) 
	AppleWebKit/531.21.8 (KHTML, like Gecko) Version/4.0.4 Safari/531.21.10,gzip(gfe),gzip(gfe)
Message-ID: <35a9c525-5378-4e9f-8e25-b4c8b1ae7c7f@l25g2000yqd.googlegroups.com>
Subject: [ruby-ffi] Struct within a Struct
From: Colby Gutierrez-Kraybill <colbygk@gmail.com>
To: ruby-ffi <ruby-ffi@googlegroups.com>
X-Original-Authentication-Results: gmr-mx.google.com; spf=pass (google.com: 
	domain of colbygk@gmail.com designates 209.85.160.190 as permitted sender) 
	smtp.mail=colbygk@gmail.com
X-Original-Sender: colbygk@gmail.com
Reply-To: ruby-ffi@googlegroups.com
Precedence: list
Mailing-list: list ruby-ffi@googlegroups.com; contact ruby-ffi+owners@googlegroups.com
List-ID: <ruby-ffi.googlegroups.com>
List-Post: <http://groups.google.com/group/ruby-ffi/post?hl=en_US>, 
	<mailto:ruby-ffi@googlegroups.com>
List-Help: <http://groups.google.com/support/?hl=en_US>, <mailto:ruby-ffi+help@googlegroups.com>
List-Archive: <http://groups.google.com/group/ruby-ffi?hl=en_US>
X-Thread-Url: http://groups.google.com/group/ruby-ffi/t/c2372af88e5991d5
X-Message-Url: http://groups.google.com/group/ruby-ffi/msg/eb759035eb38a4ff
Sender: ruby-ffi@googlegroups.com
List-Subscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=en_US>, 
	<mailto:ruby-ffi+subscribe@googlegroups.com>
List-Unsubscribe: <http://groups.google.com/group/ruby-ffi/subscribe?hl=en_US>, 
	<mailto:ruby-ffi+unsubscribe@googlegroups.com>
Content-Type: text/plain; charset=ISO-8859-1


I'm attempting to make use of a library with methods that return a
struct by value and that struct contains another struct:

spam_in_a_can_view s = windowShopping(); // note, not returning a
pointer

typedef struct
{
  size_t size;
  double *data;
} spam_in_a_can;

typedef struct
{
  spam_in_a_can can;
}  spam_in_a_can_view;

I'm not sure how to go about this (if it's possible) with FFI.  The
initial layout I would put down as:

class Spam_In_A_Can < FFI::Struct
  layout :size, :size_t,
            :data, :pointer
end

class Spam_In_A_Can_View < FFI::Struct
  layout :can, :pointer # ???
end

attach_function :windowShopping, [], :Spam_In_A_Can_View.by_value


To unsubscribe from this group, send email to ruby-ffi+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.
