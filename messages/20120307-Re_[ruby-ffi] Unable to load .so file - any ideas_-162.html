<html>
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Re: [ruby-ffi] Unable to load .so file - any ideas?</title>
<link rel="important stylesheet" href="">
<style>div.headerdisplayname {font-weight:bold;}</style></head>
<body>
<table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part1"><tr><td><div class="headerdisplayname" style="display:inline;">Subject: </div>Re: [ruby-ffi] Unable to load .so file - any ideas?</td></tr><tr><td><div class="headerdisplayname" style="display:inline;">From: </div>Tony Summerville <tsummerville@rarestep.com></td></tr><tr><td><div class="headerdisplayname" style="display:inline;">Date: </div>3/7/12 6:53 AM</td></tr></table><table border=0 cellspacing=0 cellpadding=0 width="100%" class="header-part2"><tr><td><div class="headerdisplayname" style="display:inline;">To: </div>ruby-ffi@googlegroups.com</td></tr></table><br>
<div class="moz-text-html"  lang="x-unicode">Thanks for your answer. That does appear to be the problem as the .so file was compiled for a different flavor of Linux I've come to find out...<div><br></div><div>Thanks again!<br><br>On Tuesday, March 6, 2012 2:39:41 PM UTC-6, cremes wrote:<blockquote class="gmail_quote" style="margin: 0;margin-left: 0.8ex;border-left: 1px #ccc solid;padding-left: 1ex;"><br>On Mar 6, 2012, at 9:10 AM, Tony Summerville wrote:<p>&gt; I'd really appreciate any help or thoughts on this issue.<br>&gt; <br>&gt; I'm trying to wrap a simple shared library in a Ruby Gem. The .so file was precompiled by a 3rd-party vendor and I don't have access to the C source files.<br>&gt; <br>&gt; I've installed FFI gem v1.0.11 and am able to get the basic "getpid" example working perfectly, but when I try to load the .so file I get the following error:<br>&gt; <br>&gt; ruby-1.9.2-p180 :001 &gt; require "prova-vhm-raw2xml"<br>&gt; LoadError: Could not open library '/Users/tsummerville/.rvm/<wbr>gems/ruby-1.9.2-p180@prova-<wbr>vhm-raw2xml/gems/prova-vhm-<wbr>raw2xml-0.1.0/lib/<wbr>libZVLParser64/libZVLParser64.<wbr>so': dlopen(/Users/tsummerville/.<wbr>rvm/gems/ruby-1.9.2-p180@<wbr>prova-vhm-raw2xml/gems/prova-<wbr>vhm-raw2xml-0.1.0/lib/<wbr>libZVLParser64/libZVLParser64.<wbr>so, 5): no suitable image found. &nbsp;Did find:<br>&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/Users/tsummerville/.<wbr>rvm/gems/ruby-1.9.2-p180@<wbr>prova-vhm-raw2xml/gems/prova-<wbr>vhm-raw2xml-0.1.0/lib/<wbr>libZVLParser64/libZVLParser64.<wbr>so: unknown file type, first eight bytes: 0x7F 0x45 0x4C 0x46 0x02 0x01 0x01 0x00<br>&gt; </p><p>&gt; Other potentially relevant notes:<br>&gt; - I'm on Mac OSX with 64 bit processor<br>&gt; - The libZVLParser64.so was compiled for 64 bit architecture<br>&gt; <br>&gt; Anything obvious that I'm missing? I'm new to FFI and wrapping C libs with Ruby in general, so I'm just not quite sure what I'm doing wrong. I've read through all the documentation and looked through the Google Group but can't figure out what the problem is.<br>&gt; <br>&gt; Thanks again for any help or insight you can provide!</p><p><br>What is the output of:</p><p>&nbsp; file /Users/tsummerville/.rvm/gems/<wbr>ruby-1.9.2-p180@prova-vhm-<wbr>raw2xml/gems/prova-vhm-<wbr>raw2xml-0.1.0/lib/<wbr>libZVLParser64/libZVLParser64.<wbr>so</p><p>It sounds like there is an architecture mismatch, so the output from that should hopefully shed some light on the problem.</p><p>cr</p><p></p><p></p><p></p><p></p><p></p><p></p><p></p></blockquote></div>
</div></body>
</html>
</table></div>